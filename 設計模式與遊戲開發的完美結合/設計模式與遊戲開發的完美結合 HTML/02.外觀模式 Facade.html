<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="generator" content="VNote">

    <title>02.外觀模式 Facade</title>
    <link rel="icon" href="https://github.com/tamlok/vnote/raw/master/src/resources/icons/vnote.ico">

    <style type="text/css">
    /* STYLE_GLOBAL_PLACE_HOLDER */
    </style>

    <style type="text/css">
    *,
*::before,
*::after {
  box-sizing: border-box;
}

.container-fluid {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}

.col, .col-1, .col-10, .col-11, .col-12, .col-2, .col-3, .col-4, .col-5, .col-6, .col-7, .col-8, .col-9, .col-auto, .col-lg, .col-lg-1, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-auto, .col-md, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-auto, .col-sm, .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-auto, .col-xl, .col-xl-1, .col-xl-10, .col-xl-11, .col-xl-12, .col-xl-2, .col-xl-3, .col-xl-4, .col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-auto {
    position: relative;
    width: 100%;
    min-height: 1px;
    padding-right: 15px;
    padding-left: 15px;
}

.col-12 {
    -webkit-box-flex: 0;
    -ms-flex: 0 0 100%;
    flex: 0 0 100%;
    max-width: 100%;
}

@media (min-width: 768px) {
    .col-md-3 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 25%;
    }
}

@media (min-width: 768px) {
    .col-md-9 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 75%;
        flex: 0 0 75%;
        max-width: 75%;
    }
}

@media (min-width: 1200px) {
    .col-xl-2 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 16.666667%;
        flex: 0 0 16.666667%;
        max-width: 16.666667%;
    }
}

@media (min-width: 1200px) {
    .col-xl-10 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 83.333333%;
        flex: 0 0 83.333333%;
        max-width: 83.333333%;
    }
}

@media (min-width: 768px) {
    .pt-md-3, .py-md-3 {
        padding-top: 1rem!important;
    }
}

@media (min-width: 768px) {
    .pb-md-3, .py-md-3 {
        padding-bottom: 1rem!important;
    }
}

@media (min-width: 768px) {
    .pl-md-5, .px-md-5 {
        padding-left: 3rem!important;
    }
}

.d-none {
    display: none!important;
}

@media (min-width: 1200px) {
    .d-xl-block {
        display: block!important;
    }
}

@media (min-width: 768px) {
    .d-md-block {
        display: block!important;
    }
}

.bd-content {
    -webkit-box-ordinal-group: 1;
    -ms-flex-order: 0;
    order: 0;
}

.bd-toc {
    position: -webkit-sticky;
    position: sticky;
    top: 4rem;
    height: calc(100vh - 10rem);
    overflow-y: auto;
}

.bd-toc {
    -webkit-box-ordinal-group: 2;
    -ms-flex-order: 1;
    order: 1;
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
    font-size: .875rem;
}

.section-nav {
    padding-left: 0;
}

.section-nav ul {
    font-size: .875rem;
    list-style-type: none;
}

.section-nav li {
    font-size: .875rem;
}

.section-nav a {
    color: inherit !important;
}

.row {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
}

@media (min-width: 1200px) {
    .flex-xl-nowrap {
        flex-wrap: nowrap !important;
    }
}

#floating-button {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background: #00897B;
    position: fixed;
    top: .5rem;
    right: .5rem;
    cursor: pointer;
    box-shadow: 0px 2px 5px #666;
}

#floating-button .more {
    color: #F5F5F5;
    position: absolute;
    top: 0;
    display: block;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    padding: 0;
    margin: 0;
    line-height: 2.5rem;
    font-size: 2rem;
    font-family: 'monospace';
    font-weight: 300;
}

.hide-none {
    display: none !important;
}

.col-expand {
    -webkit-box-flex: 0;
    -ms-flex: 0 0 100% !important;
    flex: 0 0 100% !important;
    max-width: 100% !important;
    padding-right: 3rem !important;
}

.outline-bold {
    font-weight: bolder !important;
}

@media print {
    #floating-button {
        display: none !important;
    }
}

    @keyframes flash { 
  0% { color: rgb(128, 203, 196); }
  10% { color: rgb(0, 137, 123); }
  40% { color: rgb(0, 137, 123); }
  50% { color: rgb(128, 203, 196); }
  60% { color: rgb(0, 137, 123); }
  90% { color: rgb(0, 137, 123); }
}
.highlighted-anchor { animation: flash 1s; }
div.mark-rect { background: transparent; border: 5px solid rgb(87, 104, 196); border-radius: 2px; position: absolute; }
#vnote-footer { width: 100%; text-align: center; opacity: 0.2; margin-top: 3rem; }
#vnote-footer p { font-size: 0.8rem; }
#vnote-footer a { color: inherit !important; }
x-eqs { display: flex; flex-direction: row; align-content: space-between; align-items: center; }
x-eqs > x-eqn { width: 100%; margin-left: 3rem; }
x-eqs > span { text-align: right; }
.view-image, .view-svg { transition: 0.3s; }
.modal-box { display: none; position: fixed; z-index: 1000; padding-top: 50px; left: 0px; top: 0px; width: 100%; height: 100%; overflow: hidden; background-color: rgba(68, 68, 68, 0.952941); }
.modal-content { margin: auto; display: block; width: auto; height: auto; cursor: move; }
.modal-content { animation-name: zoom; animation-duration: 0.6s; }
@-webkit-keyframes zoom { 
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}
@keyframes zoom { 
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}
span.modal-close { position: absolute; z-index: 1000; top: 15px; right: 35px; color: rgb(218, 218, 218); font-size: 40px; font-weight: bold; transition: 0.3s; }
span.modal-close:hover, span.modal-close:focus { color: rgb(238, 238, 238); text-decoration: none; cursor: pointer; }
@media print {
  pre, pre code, td.hljs-ln-code { white-space: pre-wrap !important; word-break: break-all !important; }
  code, a { word-break: break-all !important; }
  div.flowchart-diagram, div.mermaid-diagram, div.plantuml-diagram { overflow: hidden !important; }
  img { max-width: 100% !important; height: auto !important; }
  #vnote-footer { display: none !important; }
}
.alert { position: relative; padding: 0.75rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: 0.25rem; }
.alert-primary { color: rgb(0, 64, 133); background-color: rgb(204, 229, 255); border-color: rgb(184, 218, 255); }
.alert-secondary { color: rgb(56, 61, 65); background-color: rgb(226, 227, 229); border-color: rgb(214, 216, 219); }
.alert-success { color: rgb(21, 87, 36); background-color: rgb(212, 237, 218); border-color: rgb(195, 230, 203); }
.alert-info { color: rgb(12, 84, 96); background-color: rgb(209, 236, 241); border-color: rgb(190, 229, 235); }
.alert-warning { color: rgb(133, 100, 4); background-color: rgb(255, 243, 205); border-color: rgb(255, 238, 186); }
.alert-danger { color: rgb(114, 28, 36); background-color: rgb(248, 215, 218); border-color: rgb(245, 198, 203); }
.alert-light { color: rgb(129, 129, 130); background-color: rgb(254, 254, 254); border-color: rgb(253, 253, 254); }
.alert-dark { color: rgb(27, 30, 33); background-color: rgb(214, 216, 217); border-color: rgb(198, 200, 202); }
.vnote-anchor { font-weight: 400; color: rgba(0, 123, 255, 0.498039); transition: color 0.16s linear; padding-left: 0.375em; -webkit-font-smoothing: antialiased; text-decoration: none; opacity: 0; }
.vnote-anchor:hover { color: rgb(0, 123, 255); text-decoration: none; opacity: 1; }
.vnote-anchor::after { content: attr(data-anchor-icon); }
.vnote-btn { position: relative; display: inline-block; padding: 6px 12px; font-size: 13px; font-weight: 700; line-height: 20px; white-space: nowrap; vertical-align: middle; cursor: pointer; border: none; user-select: none; -webkit-appearance: none; }
.vnote-copy-clipboard-btn { transition: opacity 0.3s ease-in-out; opacity: 0; padding: 2px 6px; position: absolute; top: 5px; right: 5px; }
pre:hover .vnote-copy-clipboard-btn { opacity: 1; }
pre.vnote-snippet { position: relative; }
body { margin: 0px auto; font-family: "Segoe UI", Helvetica, sans-serif, Tahoma, Arial, Geneva, Georgia, Palatino, "Times New Roman", "Hiragino Sans GB", 冬青黑体, "Microsoft YaHei", 微软雅黑, "Microsoft YaHei UI", "WenQuanYi Micro Hei", 文泉驿雅黑, Dengxian, 等线体, STXihei, 华文细黑, "Liberation Sans", "Droid Sans", NSimSun, 新宋体, SimSun, 宋体; color: rgb(34, 34, 34); line-height: 1.5; padding: 15px; background: rgb(238, 238, 238); font-size: 16px; }
h1, h2, h3, h4, h5, h6 { color: rgb(34, 34, 34); font-weight: bold; margin-top: 20px; margin-bottom: 10px; padding: 0px; }
p { padding: 0px; margin-top: 16px; margin-bottom: 16px; }
h1 { font-size: 26px; }
h2 { font-size: 24px; }
h3 { font-size: 22px; }
h4 { font-size: 20px; }
h5 { font-size: 19px; }
h6 { font-size: 18px; }
a { color: rgb(0, 153, 255); margin: 0px; padding: 0px; vertical-align: baseline; text-decoration: none; word-break: break-word; }
a:hover { text-decoration: underline; color: rgb(255, 102, 0); }
a:visited { color: purple; }
ul, ol { padding: 0px 0px 0px 24px; }
li { line-height: 24px; }
li ul, li ol { margin-left: 16px; }
p, ul, ol { font-size: 16px; line-height: 24px; }
pre { display: block; overflow-y: hidden; overflow-x: auto; tab-size: 4; }
code { font-family: Consolas, Monaco, monospace, Courier; color: rgb(142, 36, 170); word-break: break-word; }
pre code { display: block; overflow-x: auto; padding: 0.5em; color: rgb(34, 34, 34); background-color: rgb(224, 224, 224); border-left: 0.5em solid rgb(0, 137, 123); line-height: 1.5; font-family: Consolas, Monaco, monospace, Courier; white-space: pre; tab-size: 4; }
pre code.markdown-metadata { border-left: 0.5em solid rgb(128, 203, 196); }
aside { display: block; float: right; width: 390px; }
blockquote { color: rgb(102, 102, 102); border-left: 0.5em solid rgb(122, 122, 122); padding: 0px 1em; margin-left: 0px; }
blockquote p { color: rgb(102, 102, 102); }
hr { display: block; text-align: left; margin: 1em 0px; border: none; height: 2px; background: rgb(153, 153, 153); }
table { padding: 0px; margin: 1rem 0.5rem; border-collapse: collapse; }
table tr { border-top: 2px solid rgb(204, 204, 204); background-color: white; margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 2px solid rgb(204, 204, 204); margin: 0px; padding: 6px 13px; }
table tr td { border: 2px solid rgb(204, 204, 204); margin: 0px; padding: 6px 13px; }
table tr th :first-child, table tr td :first-child { margin-top: 0px; }
table tr th :last-child, table tr td :last-child { margin-bottom: 0px; }
div.mermaid-diagram { margin: 16px 0px; overflow-y: hidden; }
div.flowchart-diagram { padding: 0px 5px; margin: 16px 0px; width: fit-content; overflow: hidden; }
div.wavedrom-diagram { padding: 0px 5px; margin: 16px 0px; width: fit-content; overflow: hidden; }
div.plantuml-diagram { padding: 5px 5px 0px; margin: 16px 0px; width: fit-content; overflow: hidden; }
.img-package { text-align: center; }
img.img-center { display: block; margin-left: auto; margin-right: auto; }
span.img-caption { min-width: 20%; max-width: 80%; display: inline-block; padding: 10px; margin: 0px auto; border-bottom: 1px solid rgb(192, 192, 192); color: rgb(108, 108, 108); text-align: center; line-height: 1.5; }
.emoji_zero, .emoji_one, .emoji_two, .emoji_three, .emoji_four, .emoji_five, .emoji_six, .emoji_seven, .emoji_eight, .emoji_nine { margin-left: 5px; margin-right: 8px; }
div.preview-hint { opacity: 0.5; margin-top: 30%; margin-bottom: 30%; align-items: center; display: flex; flex-direction: column; justify-content: center; }
table.hljs-ln tr { border: none; background-color: transparent; }
table.hljs-ln tr td { border: none; background-color: transparent; }
table.hljs-ln tr td.hljs-ln-numbers { user-select: none; text-align: center; color: rgb(170, 170, 170); border-right: 1px solid rgb(204, 204, 204); vertical-align: top; padding-right: 5px; white-space: nowrap; }
table.hljs-ln tr td.hljs-ln-code { padding-left: 10px; }
::-webkit-scrollbar { background-color: rgb(234, 234, 234); width: 14px; height: 14px; border: none; }
::-webkit-scrollbar-corner { background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-button { height: 14px; width: 14px; background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-button:hover { background-color: rgb(208, 208, 208); }
::-webkit-scrollbar-button:active { background-color: rgb(178, 178, 178); }
::-webkit-scrollbar-track { background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-thumb { border: none; background-color: rgb(218, 218, 218); }
::-webkit-scrollbar-thumb:hover { background-color: rgb(208, 208, 208); }
::-webkit-scrollbar-thumb:active { background-color: rgb(178, 178, 178); }
::-webkit-scrollbar-button:horizontal:increment { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(-90 256.00000000000006,256) " id="svg_1">   <polygon fill="%23333333" id="svg_2" points="128,192 256,320 384,192  "/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:horizontal:decrement { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(90 255.99999999999997,256.00000000000006) " id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:vertical:increment { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="null" id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:vertical:decrement { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(180 255.99999999999997,256) " id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::selection { background: rgb(25, 118, 210); color: rgb(238, 238, 238); }
.modal-box { background-color: rgba(234, 234, 234, 0.952941); }
span.modal-close { color: rgb(102, 102, 102); }
span.modal-close:hover, span.modal-close:focus { color: rgb(34, 34, 34); }
.hljs { display: block; overflow-x: auto; padding: 0.5em; background: rgb(224, 224, 224); }
.hljs, .hljs-subst { color: rgb(54, 54, 54); }
.hljs-comment { color: rgb(118, 118, 118); }
.hljs-keyword, .hljs-attribute, .hljs-selector-tag, .hljs-meta-keyword, .hljs-doctag, .hljs-name { color: rgb(0, 0, 238); }
.hljs-type, .hljs-string, .hljs-number, .hljs-selector-id, .hljs-selector-class, .hljs-quote, .hljs-template-tag, .hljs-deletion { color: rgb(136, 0, 0); }
.hljs-title, .hljs-section { color: rgb(136, 0, 0); font-weight: bold; }
.hljs-regexp, .hljs-symbol, .hljs-variable, .hljs-template-variable, .hljs-link, .hljs-selector-attr, .hljs-selector-pseudo { color: rgb(188, 96, 96); }
.hljs-literal { color: rgb(175, 0, 215); }
.hljs-built_in, .hljs-bullet, .hljs-code, .hljs-addition { color: rgb(0, 135, 0); }
.hljs-meta { color: rgb(31, 113, 153); }
.hljs-meta-string { color: rgb(77, 153, 191); }
.hljs-emphasis { font-style: italic; }
.hljs-strong { font-weight: bold; }
.mermaid-diagram .mermaid .label { color: rgb(51, 51, 51); }
.mermaid-diagram .node rect, .mermaid-diagram .node circle, .mermaid-diagram .node ellipse, .mermaid-diagram .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px; }
.mermaid-diagram .edgePath .path { stroke: rgb(51, 51, 51); }
.mermaid-diagram .edgeLabel { background-color: rgb(232, 232, 232); }
.mermaid-diagram .cluster rect { fill: rgb(255, 255, 222) !important; rx: 4 !important; stroke: rgb(170, 170, 51) !important; stroke-width: 1px !important; }
.mermaid-diagram .cluster text { fill: rgb(51, 51, 51); }
.mermaid-diagram .actor { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255); }
.mermaid-diagram text.actor { fill: black; stroke: none; }
.mermaid-diagram .actor-line { stroke: grey; }
.mermaid-diagram .messageLine0 { stroke-width: 1.5; stroke: rgb(51, 51, 51); }
.mermaid-diagram .messageLine1 { stroke-width: 1.5; stroke: rgb(51, 51, 51); }
.mermaid-diagram #arrowhead { fill: rgb(51, 51, 51); }
.mermaid-diagram #crosshead path { fill: rgb(51, 51, 51) !important; stroke: rgb(51, 51, 51) !important; }
.mermaid-diagram .messageText { fill: rgb(51, 51, 51); stroke: none; }
.mermaid-diagram .labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255); }
.mermaid-diagram .labelText { fill: black; stroke: none; }
.mermaid-diagram .loopText { fill: black; stroke: none; }
.mermaid-diagram .loopLine { stroke-width: 2; stroke: rgb(204, 204, 255); }
.mermaid-diagram .note { stroke: rgb(170, 170, 51); fill: rgb(255, 245, 173); }
.mermaid-diagram .noteText { fill: black; stroke: none; font-family: "trebuchet ms", verdana, arial; font-size: 14px; }
.mermaid-diagram .section { stroke: none; opacity: 0.2; }
.mermaid-diagram .section0 { fill: rgba(102, 102, 255, 0.490196); }
.mermaid-diagram .section2 { fill: rgb(255, 244, 0); }
.mermaid-diagram .section1, .mermaid-diagram .section3 { fill: white; opacity: 0.2; }
.mermaid-diagram .sectionTitle0 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle1 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle2 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle3 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle { text-anchor: start; font-size: 11px; }
.mermaid-diagram .grid .tick { stroke: lightgrey; opacity: 0.3; shape-rendering: crispEdges; }
.mermaid-diagram .grid path { stroke-width: 0; }
.mermaid-diagram .today { fill: none; stroke: red; stroke-width: 2px; }
.mermaid-diagram .task { stroke-width: 2; }
.mermaid-diagram .taskText { text-anchor: middle; font-size: 11px; }
.mermaid-diagram .taskTextOutsideRight { fill: black; text-anchor: start; font-size: 11px; }
.mermaid-diagram .taskTextOutsideLeft { fill: black; text-anchor: end; font-size: 11px; }
.mermaid-diagram .taskText0, .mermaid-diagram .taskText1, .mermaid-diagram .taskText2, .mermaid-diagram .taskText3 { fill: white; }
.mermaid-diagram .task0, .mermaid-diagram .task1, .mermaid-diagram .task2, .mermaid-diagram .task3 { fill: rgb(138, 144, 221); stroke: rgb(83, 79, 188); }
.mermaid-diagram .taskTextOutside0, .mermaid-diagram .taskTextOutside2 { fill: black; }
.mermaid-diagram .taskTextOutside1, .mermaid-diagram .taskTextOutside3 { fill: black; }
.mermaid-diagram .active0, .mermaid-diagram .active1, .mermaid-diagram .active2, .mermaid-diagram .active3 { fill: rgb(191, 199, 255); stroke: rgb(83, 79, 188); }
.mermaid-diagram .activeText0, .mermaid-diagram .activeText1, .mermaid-diagram .activeText2, .mermaid-diagram .activeText3 { fill: black !important; }
.mermaid-diagram .done0, .mermaid-diagram .done1, .mermaid-diagram .done2, .mermaid-diagram .done3 { stroke: grey; fill: lightgrey; stroke-width: 2; }
.mermaid-diagram .doneText0, .mermaid-diagram .doneText1, .mermaid-diagram .doneText2, .mermaid-diagram .doneText3 { fill: black !important; }
.mermaid-diagram .crit0, .mermaid-diagram .crit1, .mermaid-diagram .crit2, .mermaid-diagram .crit3 { stroke: rgb(255, 136, 136); fill: red; stroke-width: 2; }
.mermaid-diagram .activeCrit0, .mermaid-diagram .activeCrit1, .mermaid-diagram .activeCrit2, .mermaid-diagram .activeCrit3 { stroke: rgb(255, 136, 136); fill: rgb(191, 199, 255); stroke-width: 2; }
.mermaid-diagram .doneCrit0, .mermaid-diagram .doneCrit1, .mermaid-diagram .doneCrit2, .mermaid-diagram .doneCrit3 { stroke: rgb(255, 136, 136); fill: lightgrey; stroke-width: 2; cursor: pointer; shape-rendering: crispEdges; }
.mermaid-diagram .doneCritText0, .mermaid-diagram .doneCritText1, .mermaid-diagram .doneCritText2, .mermaid-diagram .doneCritText3 { fill: black !important; }
.mermaid-diagram .activeCritText0, .mermaid-diagram .activeCritText1, .mermaid-diagram .activeCritText2, .mermaid-diagram .activeCritText3 { fill: black !important; }
.mermaid-diagram .titleText { text-anchor: middle; font-size: 18px; fill: black; }
.mermaid-diagram .node text { font-family: "trebuchet ms", verdana, arial; font-size: 14px; }
.mermaid-diagram div.mermaidTooltip { position: absolute; text-align: center; max-width: 200px; padding: 2px; font-family: "trebuchet ms", verdana, arial; font-size: 12px; background: rgb(255, 255, 222); border: 1px solid rgb(170, 170, 51); border-radius: 2px; pointer-events: none; z-index: 100; }
.hljs-ln { border-collapse: collapse; }
.hljs-ln td { padding: 0px; }
.hljs-ln-n::before { content: attr(data-line-number); }
.MathJax_Hover_Frame { border-radius: 0.25em; box-shadow: rgb(136, 51, 170) 0px 0px 15px; display: inline-block; position: absolute; border: 1px solid rgb(170, 102, 221) !important; }
.MathJax_Menu_Button .MathJax_Hover_Arrow { position: absolute; cursor: pointer; display: inline-block; border: 2px solid rgb(170, 170, 170); border-radius: 4px; font-family: "Courier New", Courier; font-size: 9px; color: rgb(240, 240, 240); }
.MathJax_Menu_Button .MathJax_Hover_Arrow span { display: block; background-color: rgb(170, 170, 170); border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px; }
.MathJax_Hover_Arrow:hover { color: white !important; border: 2px solid rgb(204, 204, 204) !important; }
.MathJax_Hover_Arrow:hover span { background-color: rgb(204, 204, 204) !important; }
#MathJax_About { position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: rgb(221, 221, 221); color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
#MathJax_About.MathJax_MousePost { outline: none; }
.MathJax_Menu { position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid rgb(204, 204, 204); margin: 0px; cursor: default; font-style: normal; font-weight: normal; font-size: 15px; font-family: "Microsoft JhengHei UI"; font-stretch: normal; font-variant: normal; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
.MathJax_MenuItem { padding: 2px 2em; background: transparent; }
.MathJax_MenuArrow { position: absolute; right: 0.5em; padding-top: 0.25em; color: rgb(102, 102, 102); font-size: 0.75em; }
.MathJax_MenuActive .MathJax_MenuArrow { color: white; }
.MathJax_MenuArrow.RTL { left: 0.5em; right: auto; }
.MathJax_MenuCheck { position: absolute; left: 0.7em; }
.MathJax_MenuCheck.RTL { right: 0.7em; left: auto; }
.MathJax_MenuRadioCheck { position: absolute; left: 1em; }
.MathJax_MenuRadioCheck.RTL { right: 1em; left: auto; }
.MathJax_MenuLabel { padding: 2px 2em 4px 1.33em; font-style: italic; }
.MathJax_MenuRule { border-top: 1px solid rgb(204, 204, 204); margin: 4px 1px 0px; }
.MathJax_MenuDisabled { color: graytext; }
.MathJax_MenuActive { background-color: highlight; color: highlighttext; }
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus { background-color: rgb(232, 232, 232); }
.MathJax_ContextMenu:focus { outline: none; }
.MathJax_ContextMenu .MathJax_MenuItem:focus { outline: none; }
#MathJax_AboutClose { top: 0.2em; right: 0.2em; }
.MathJax_Menu .MathJax_MenuClose { top: -10px; left: -10px; }
.MathJax_MenuClose { position: absolute; cursor: pointer; display: inline-block; border: 2px solid rgb(170, 170, 170); border-radius: 18px; font-family: "Courier New", Courier; font-size: 24px; color: rgb(240, 240, 240); }
.MathJax_MenuClose span { display: block; background-color: rgb(170, 170, 170); border: 1.5px solid; border-radius: 18px; line-height: 0; padding: 8px 0px 6px; }
.MathJax_MenuClose:hover { color: white !important; border: 2px solid rgb(204, 204, 204) !important; }
.MathJax_MenuClose:hover span { background-color: rgb(204, 204, 204) !important; }
.MathJax_MenuClose:hover:focus { outline: none; }
.MathJax_Preview .MJXf-math { color: inherit !important; }
.MJX_Assistive_MathML { top: 0px; left: 0px; clip: rect(1px 1px 1px 1px); user-select: none; position: absolute !important; padding: 1px 0px 0px !important; border: 0px !important; height: 1px !important; width: 1px !important; overflow: hidden !important; display: block !important; }
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block { width: 100% !important; }
#MathJax_Zoom { position: absolute; background-color: rgb(240, 240, 240); overflow: auto; display: block; z-index: 301; padding: 0.5em; border: 1px solid black; margin: 0px; font-weight: normal; font-style: normal; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-sizing: content-box; box-shadow: rgb(170, 170, 170) 5px 5px 15px; }
#MathJax_ZoomOverlay { position: absolute; left: 0px; top: 0px; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0px; padding: 0px; margin: 0px; background-color: white; opacity: 0; }
#MathJax_ZoomFrame { position: relative; display: inline-block; height: 0px; width: 0px; }
#MathJax_ZoomEventTrap { position: absolute; left: 0px; top: 0px; z-index: 302; display: inline-block; border: 0px; padding: 0px; margin: 0px; background-color: white; opacity: 0; }
.MathJax_Preview { color: rgb(136, 136, 136); }
#MathJax_Message { position: fixed; left: 1px; bottom: 2px; background-color: rgb(230, 230, 230); border: 1px solid rgb(149, 149, 149); margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap; }
#MathJax_MSIE_Frame { position: absolute; top: 0px; left: 0px; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px; }
.MathJax_Error { color: rgb(204, 0, 0); font-style: italic; }
.MJXp-script { font-size: 0.8em; }
.MJXp-right { transform-origin: right center 0px; }
.MJXp-bold { font-weight: bold; }
.MJXp-italic { font-style: italic; }
.MJXp-scr { font-family: MathJax_Script, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-frak { font-family: MathJax_Fraktur, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-sf { font-family: MathJax_SansSerif, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-cal { font-family: MathJax_Caligraphic, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-mono { font-family: MathJax_Typewriter, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-largeop { font-size: 150%; }
.MJXp-largeop.MJXp-int { vertical-align: -0.2em; }
.MJXp-math { display: inline-block; line-height: 1.2; text-indent: 0px; font-family: "Times New Roman", Times, STIXGeneral, serif; white-space: nowrap; border-collapse: collapse; }
.MJXp-display { display: block; text-align: center; margin: 1em 0px; }
.MJXp-math span { display: inline-block; }
.MJXp-box { text-align: center; display: block !important; }
.MJXp-box::after { content: " "; }
.MJXp-rule { margin-top: 0.1em; display: block !important; }
.MJXp-char { display: block !important; }
.MJXp-mo { margin: 0px 0.15em; }
.MJXp-mfrac { margin: 0px 0.125em; vertical-align: 0.25em; }
.MJXp-denom { width: 100%; display: inline-table !important; }
.MJXp-denom > * { display: table-row !important; }
.MJXp-surd { vertical-align: top; }
.MJXp-surd > * { display: block !important; }
.MJXp-script-box > * { height: 50%; display: table !important; }
.MJXp-script-box > * > * { vertical-align: top; display: table-cell !important; }
.MJXp-script-box > :last-child > * { vertical-align: bottom; }
.MJXp-script-box > * > * > * { display: block !important; }
.MJXp-mphantom { visibility: hidden; }
.MJXp-munderover { display: inline-table !important; }
.MJXp-over { text-align: center; display: inline-block !important; }
.MJXp-over > * { display: block !important; }
.MJXp-munderover > * { display: table-row !important; }
.MJXp-mtable { vertical-align: 0.25em; margin: 0px 0.125em; }
.MJXp-mtable > * { vertical-align: middle; display: inline-table !important; }
.MJXp-mtr { display: table-row !important; }
.MJXp-mtd { text-align: center; padding: 0.5em 0px 0px 0.5em; display: table-cell !important; }
.MJXp-mtr > .MJXp-mtd:first-child { padding-left: 0px; }
.MJXp-mtr:first-child > .MJXp-mtd { padding-top: 0px; }
.MJXp-mlabeledtr { display: table-row !important; }
.MJXp-mlabeledtr > .MJXp-mtd:first-child { padding-left: 0px; }
.MJXp-mlabeledtr:first-child > .MJXp-mtd { padding-top: 0px; }
.MJXp-merror { background-color: rgb(255, 255, 136); color: rgb(204, 0, 0); border: 1px solid rgb(204, 0, 0); padding: 1px 3px; font-style: normal; font-size: 90%; }
.MJXp-scale0 { transform: scaleX(0); }
.MJXp-scale1 { transform: scaleX(0.1); }
.MJXp-scale2 { transform: scaleX(0.2); }
.MJXp-scale3 { transform: scaleX(0.3); }
.MJXp-scale4 { transform: scaleX(0.4); }
.MJXp-scale5 { transform: scaleX(0.5); }
.MJXp-scale6 { transform: scaleX(0.6); }
.MJXp-scale7 { transform: scaleX(0.7); }
.MJXp-scale8 { transform: scaleX(0.8); }
.MJXp-scale9 { transform: scaleX(0.9); }
.MathJax_PHTML .noError { font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid; }

    </style>

    <script type="text/javascript">
var toc = [];

var setVisible = function(node, visible) {
    var cl = 'hide-none';
    if (visible) {
        node.classList.remove(cl);
    } else {
        node.classList.add(cl);
    }
};

var isVisible = function(node) {
    var cl = 'hide-none';
    return !node.classList.contains(cl);
};

var setPostContentExpanded = function(node, expanded) {
    var cl = 'col-expand';
    if (expanded) {
        node.classList.add(cl);
    } else {
        node.classList.remove(cl);
    }
};

var setOutlinePanelVisible = function(visible) {
    var outlinePanel = document.getElementById('outline-panel');
    var postContent = document.getElementById('post-content');

    setVisible(outlinePanel, visible);
    setPostContentExpanded(postContent, !visible);
};

var isOutlinePanelVisible = function() {
    var outlinePanel = document.getElementById('outline-panel');
    return isVisible(outlinePanel);
};

window.addEventListener('load', function() {
    var outlinePanel = document.getElementById('outline-panel');
    outlinePanel.style.display = 'initial';

    var floatingContainer = document.getElementById('container-floating');
    floatingContainer.style.display = 'initial';

    var outlineContent = document.getElementById('outline-content');
    var postContent = document.getElementById('post-content');

    // Escape @text to Html.
    var escapeHtml = function(text) {
        var map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };

        return text.replace(/[&<>"']/g, function(m) { return map[m]; });
    }

    // Fetch the outline.
    var headers = postContent.querySelectorAll("h1, h2, h3, h4, h5, h6");
    toc = [];
    for (var i = 0; i < headers.length; ++i) {
        var header = headers[i];

        toc.push({
            level: parseInt(header.tagName.substr(1)),
            anchor: header.id,
            title: escapeHtml(header.textContent)
        });
    }

    if (toc.length == 0) {
        setOutlinePanelVisible(false);
        setVisible(floatingContainer, false);
        return;
    }

    var baseLevel = baseLevelOfToc(toc);
    var tocTree = tocToTree(toPerfectToc(toc, baseLevel), baseLevel);

    outlineContent.innerHTML = tocTree;
    setOutlinePanelVisible(true);
    setVisible(floatingContainer, true);
});

// Return the topest level of @toc, starting from 1.
var baseLevelOfToc = function(p_toc) {
    var level = -1;
    for (i in p_toc) {
        if (level == -1) {
            level = p_toc[i].level;
        } else if (level > p_toc[i].level) {
            level = p_toc[i].level;
        }
    }

    if (level == -1) {
        level = 1;
    }

    return level;
};

// Handle wrong title levels, such as '#' followed by '###'
var toPerfectToc = function(p_toc, p_baseLevel) {
    var i;
    var curLevel = p_baseLevel - 1;
    var perfToc = [];
    for (i in p_toc) {
        var item = p_toc[i];

        // Insert empty header.
        while (item.level > curLevel + 1) {
            curLevel += 1;
            var tmp = { level: curLevel,
                        anchor: '',
                        title: '[EMPTY]'
                      };
            perfToc.push(tmp);
        }

        perfToc.push(item);
        curLevel = item.level;
    }

    return perfToc;
};

var itemToHtml = function(item) {
    return '<a href="#' + item.anchor + '" data="' + item.anchor + '">' + item.title + '</a>';
};

// Turn a perfect toc to a tree using <ul>
var tocToTree = function(p_toc, p_baseLevel) {
    var i;
    var front = '<li>';
    var ending = ['</li>'];
    var curLevel = p_baseLevel;
    for (i in p_toc) {
        var item = p_toc[i];
        if (item.level == curLevel) {
            front += '</li>';
            front += '<li>';
            front += itemToHtml(item);
        } else if (item.level > curLevel) {
            // assert(item.level - curLevel == 1)
            front += '<ul>';
            ending.push('</ul>');
            front += '<li>';
            front += itemToHtml(item);
            ending.push('</li>');
            curLevel = item.level;
        } else {
            while (item.level < curLevel) {
                var ele = ending.pop();
                front += ele;
                if (ele == '</ul>') {
                    curLevel--;
                }
            }
            front += '</li>';
            front += '<li>';
            front += itemToHtml(item);
        }
    }
    while (ending.length > 0) {
        front += ending.pop();
    }
    front = front.replace("<li></li>", "");
    front = '<ul>' + front + '</ul>';
    return front;
};

var toggleMore = function() {
    if (toc.length == 0) {
        return;
    }

    var p = document.getElementById('floating-more');
    if (isOutlinePanelVisible()) {
        p.textContent = '<';
        setOutlinePanelVisible(false);
    } else {
        p.textContent = '>';
        setOutlinePanelVisible(true);
    }
};

window.addEventListener('scroll', function() {
    if (toc.length == 0 || !isOutlinePanelVisible()) {
        return;
    }

    var postContent = document.getElementById('post-content');
    var scrollTop = document.documentElement.scrollTop
                    || document.body.scrollTop
                    || window.pageYOffset;
    var eles = postContent.querySelectorAll("h1, h2, h3, h4, h5, h6");

    if (eles.length == 0) {
        return;
    }

    var idx = -1;
    var biaScrollTop = scrollTop + 50;
    for (var i = 0; i < eles.length; ++i) {
        if (biaScrollTop >= eles[i].offsetTop) {
            idx = i;
        } else {
            break;
        }
    }

    var header = '';
    if (idx != -1) {
        header = eles[idx].id;
    }

    highlightItemOnlyInOutline(header);
});

var highlightItemOnlyInOutline = function(id) {
    var cl = 'outline-bold';
    var outlineContent = document.getElementById('outline-content');
    var eles = outlineContent.querySelectorAll("a");
    var target = null;
    for (var i = 0; i < eles.length; ++i) {
        var ele = eles[i];
        if (ele.getAttribute('data') == id) {
            target = ele;
            ele.classList.add(cl);
        } else {
            ele.classList.remove(cl);
        }
    }

    // TODO: scroll target into view within the outline panel scroll area.
};

</script>


<!-- HEAD_PLACE_HOLDER -->
</head>
<body>
<div class="container-fluid">
<div class="row flex-xl-nowrap">
    <div id="outline-panel" style="display:none;" class="d-none d-md-block d-xl-block col-md-3 col-xl-2 bd-toc">
        <div id="outline-content" class="section-nav"></div>
    </div>
    <div id="post-content" class="col-12 col-md-9 col-xl-10 py-md-3 pl-md-5 bd-content">
    <h1 id="toc_0">外觀模式 Facade<a class="vnote-anchor" href="#toc_0" data-anchor-icon="#"></a></h1>
<h2 id="toc_1">講解<a class="vnote-anchor" href="#toc_1" data-anchor-icon="#"></a></h2>
<ul>
<li>
<h3 id="toc_2">外觀模式 就是給一堆Class一個共通的出口，以避免Client與過多跟他無關的Class耦合<a class="vnote-anchor" href="#toc_2" data-anchor-icon="#"></a></h3>
</li>
<li>優點 就是無需讓Client打交道，只需要一個Class(Facade)做出口就可以，既使後面有其他腳本，也只需修改Facade就可以，而且將東西縮減，這樣後續維護也方便</li>
<li>在書中外觀模式是將遊戲中其他系統例:"兵營系統""士兵系統"....<br>
跟狀態機BattleState連接來解耦</li>
</ul>
<h3 id="toc_3">基本類圖<a class="vnote-anchor" href="#toc_3" data-anchor-icon="#"></a></h3>
<div class="plantuml-diagram"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="693px" preserveAspectRatio="none" style="width:585px;height:693px;" version="1.1" viewBox="0 0 585 693" width="585px" zoomAndPan="magnify" class="view-svg"><defs><filter height="300%" id="f1trj4p1gfjib1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--MD5=[49367f88d513d90021b802ee0a6b77d5]
cluster Facade外觀模式--><polygon fill="#FFFFFF" filter="url(#f1trj4p1gfjib1)" points="33,229.5,208.5,229.5,219,268.4106,552,268.4106,552,675,33,675,33,229.5" style="stroke: #000000; stroke-width: 2.25;"></polygon><line style="stroke: #000000; stroke-width: 2.25;" x1="33" x2="219" y1="268.4106" y2="268.4106"></line><text fill="#000000" font-family="sans-serif" font-size="21" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166.5" x="39" y="257.7964">Facade外觀模式</text><text fill="#000000" font-family="sans-serif" font-size="21" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67.5" x="264.75" y="296.707">«Rect»</text><!--MD5=[790e9955d9690e5344ead96b2c38e22e]
class Facade--><rect fill="#FEFECE" filter="url(#f1trj4p1gfjib1)" height="142.5037" id="Facade" style="stroke: #A80036; stroke-width: 2.25;" width="322.5" x="129.75" y="316.5"></rect><ellipse cx="253.875" cy="340.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M260.0625,346.4297 Q259.5234,347.3672 258.2578,348.3281 Q256.1484,349.8516 252.0469,349.8516 Q248.7656,349.8516 246.5625,347.6484 Q244.0078,345.0938 244.0078,340.3125 Q244.0078,335.9063 246.5391,333.2109 Q248.8594,330.7734 252.1875,330.7734 Q255,330.7734 256.4766,331.2188 Q257.9531,331.6641 257.9531,331.6641 Q257.9531,331.6641 257.9531,330.8203 L259.4766,330.6797 L259.7109,336.7734 L257.7188,336.9609 Q256.5,331.5703 252.3984,331.5703 Q252.3984,331.5703 251.5078,331.9922 Q250.1484,332.5078 249.375,333.3281 Q247.3125,335.6484 247.2891,340.3594 Q247.2656,344.5313 249.5625,346.875 Q251.5078,348.8672 252.75,348.8672 Q255.7969,348.8672 259.0781,345.0234 L260.0625,346.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="284.625" y="349.3638">Facade</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="131.25" x2="450.75" y1="364.5" y2="364.5"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="115.5" x="138.75" y="390.3757">外觀模式的出口</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="304.5" x="138.75" y="413.877">統合下面的Class既使後面需要增加減少，</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="169.5" x="138.75" y="437.3782">也只需修改Facade就好</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="131.25" x2="450.75" y1="447.0037" y2="447.0037"></line><!--MD5=[149913fe794b3f7cafce514aba7da160]
class SystemA--><rect fill="#FEFECE" filter="url(#f1trj4p1gfjib1)" height="72" id="SystemA" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="57" y="579"></rect><ellipse cx="79.5" cy="603" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M85.6875,608.9297 Q85.1484,609.8672 83.8828,610.8281 Q81.7734,612.3516 77.6719,612.3516 Q74.3906,612.3516 72.1875,610.1484 Q69.6328,607.5938 69.6328,602.8125 Q69.6328,598.4063 72.1641,595.7109 Q74.4844,593.2734 77.8125,593.2734 Q80.625,593.2734 82.1016,593.7188 Q83.5781,594.1641 83.5781,594.1641 Q83.5781,594.1641 83.5781,593.3203 L85.1016,593.1797 L85.3359,599.2734 L83.3438,599.4609 Q82.125,594.0703 78.0234,594.0703 Q78.0234,594.0703 77.1328,594.4922 Q75.7734,595.0078 75,595.8281 Q72.9375,598.1484 72.9141,602.8594 Q72.8906,607.0313 75.1875,609.375 Q77.1328,611.3672 78.375,611.3672 Q81.4219,611.3672 84.7031,607.5234 L85.6875,608.9297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="72" x="100.5" y="611.8638">SystemA</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="58.5" x2="175.5" y1="627" y2="627"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="58.5" x2="175.5" y1="639" y2="639"></line><!--MD5=[671224af43726ee1a8f81bd7f50f65bc]
class SystemB--><rect fill="#FEFECE" filter="url(#f1trj4p1gfjib1)" height="72" id="SystemB" style="stroke: #A80036; stroke-width: 2.25;" width="121.5" x="230.25" y="579"></rect><ellipse cx="252.75" cy="603" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M258.9375,608.9297 Q258.3984,609.8672 257.1328,610.8281 Q255.0234,612.3516 250.9219,612.3516 Q247.6406,612.3516 245.4375,610.1484 Q242.8828,607.5938 242.8828,602.8125 Q242.8828,598.4063 245.4141,595.7109 Q247.7344,593.2734 251.0625,593.2734 Q253.875,593.2734 255.3516,593.7188 Q256.8281,594.1641 256.8281,594.1641 Q256.8281,594.1641 256.8281,593.3203 L258.3516,593.1797 L258.5859,599.2734 L256.5938,599.4609 Q255.375,594.0703 251.2734,594.0703 Q251.2734,594.0703 250.3828,594.4922 Q249.0234,595.0078 248.25,595.8281 Q246.1875,598.1484 246.1641,602.8594 Q246.1406,607.0313 248.4375,609.375 Q250.3828,611.3672 251.625,611.3672 Q254.6719,611.3672 257.9531,607.5234 L258.9375,608.9297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="73.5" x="273.75" y="611.8638">SystemB</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="231.75" x2="350.25" y1="627" y2="627"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="231.75" x2="350.25" y1="639" y2="639"></line><!--MD5=[aaa73a23036fb8becdf1a66f3d1df0c5]
class SystemC--><rect fill="#FEFECE" filter="url(#f1trj4p1gfjib1)" height="72" id="SystemC" style="stroke: #A80036; stroke-width: 2.25;" width="123" x="405" y="579"></rect><ellipse cx="427.5" cy="603" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M433.6875,608.9297 Q433.1484,609.8672 431.8828,610.8281 Q429.7734,612.3516 425.6719,612.3516 Q422.3906,612.3516 420.1875,610.1484 Q417.6328,607.5938 417.6328,602.8125 Q417.6328,598.4063 420.1641,595.7109 Q422.4844,593.2734 425.8125,593.2734 Q428.625,593.2734 430.1016,593.7188 Q431.5781,594.1641 431.5781,594.1641 Q431.5781,594.1641 431.5781,593.3203 L433.1016,593.1797 L433.3359,599.2734 L431.3438,599.4609 Q430.125,594.0703 426.0234,594.0703 Q426.0234,594.0703 425.1328,594.4922 Q423.7734,595.0078 423,595.8281 Q420.9375,598.1484 420.9141,602.8594 Q420.8906,607.0313 423.1875,609.375 Q425.1328,611.3672 426.375,611.3672 Q429.4219,611.3672 432.7031,607.5234 L433.6875,608.9297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="75" x="448.5" y="611.8638">SystemC</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="406.5" x2="526.5" y1="627" y2="627"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="406.5" x2="526.5" y1="639" y2="639"></line><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect fill="#FEFECE" filter="url(#f1trj4p1gfjib1)" height="119.0024" id="Client" style="stroke: #A80036; stroke-width: 2.25;" width="270" x="156" y="12"></rect><ellipse cx="260.625" cy="36" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M266.8125,41.9297 Q266.2734,42.8672 265.0078,43.8281 Q262.8984,45.3516 258.7969,45.3516 Q255.5156,45.3516 253.3125,43.1484 Q250.7578,40.5938 250.7578,35.8125 Q250.7578,31.4063 253.2891,28.7109 Q255.6094,26.2734 258.9375,26.2734 Q261.75,26.2734 263.2266,26.7188 Q264.7031,27.1641 264.7031,27.1641 Q264.7031,27.1641 264.7031,26.3203 L266.2266,26.1797 L266.4609,32.2734 L264.4688,32.4609 Q263.25,27.0703 259.1484,27.0703 Q259.1484,27.0703 258.2578,27.4922 Q256.8984,28.0078 256.125,28.8281 Q254.0625,31.1484 254.0391,35.8594 Q254.0156,40.0313 256.3125,42.375 Q258.2578,44.3672 259.5,44.3672 Q262.5469,44.3672 265.8281,40.5234 L266.8125,41.9297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="48" x="291.375" y="44.8638">Client</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="157.5" x2="424.5" y1="60" y2="60"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="49.5" x="165" y="85.8757">客戶端</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="252" x="165" y="109.377">客戶端只需要跟Facade打交到就好</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="157.5" x2="424.5" y1="119.0024" y2="119.0024"></line><!--MD5=[b443b131f9e558b5ae61c4966c336f30]
link Client to Facade--><path d="M291,130.9815 C291,180.939 291,253.3485 291,308.2965 " fill="none" id="Client->Facade" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="291,316.272,297,302.772,291,308.772,285,302.772,291,316.272" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="201" x="292.5" y="200.4895">使用Facade腳本來控制</text><!--MD5=[9060faf554f8d01d68dfa08922630af3]
link Facade to SystemA--><path d="M236.4225,459.5895 C207.645,496.6785 173.343,540.885 148.9011,572.3862 " fill="none" id="Facade->SystemA" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="144.1487,578.511,157.1651,571.5237,148.7465,572.5857,147.6845,564.1671,144.1487,578.511" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="201" y="528.9895">控制</text><!--MD5=[ad0c7f666c8aea2a1af51b539f6a4b99]
link Facade to SystemB--><path d="M291,459.5895 C291,496.0605 291,539.4135 291,570.8007 " fill="none" id="Facade->SystemB" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="291,578.511,297,565.011,291,571.011,285,565.011,291,578.511" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="292.5" y="528.9895">控制</text><!--MD5=[6ec2f556bbc4cdf50b98a50fc3688561]
link Facade to SystemC--><path d="M346.0485,459.5895 C375.0735,496.6785 409.671,540.885 434.3235,572.3862 " fill="none" id="Facade->SystemC" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="439.1175,578.511,435.5216,564.182,434.4949,572.605,426.0719,571.5782,439.1175,578.511" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="400.5" y="528.9895">控制</text><!--MD5=[3138b423651875cbef3ae151305061f0]
@startuml
skinparam classAttributeIconSize 0
scale 1.5
class Client{
客戶端
客戶端只需要跟Facade打交到就好
__
}

package Facade外觀模式 <<Rect>> {
class Facade
class SystemA
class SystemB
class SystemC
}

class Facade{
外觀模式的出口
統合下面的Class既使後面需要增加減少，
也只需修改Facade就好
__
}
class SystemA{
}
class SystemB{

}
class SystemC{

}

Client - -> Facade :使用Facade腳本來控制
Facade - -> SystemA:控制
Facade - -> SystemB:控制
Facade - -> SystemC:控制


@enduml

PlantUML version 1.2020.00(Sat Jan 11 20:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_231-b11
Operating System: Windows 10
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg></div>
<h3 id="toc_4">以下是書中類圖(BattleState狀態機控管System)<a class="vnote-anchor" href="#toc_4" data-anchor-icon="#"></a></h3>
<h4 id="toc_5">BattleState裡面有<a class="vnote-anchor" href="#toc_5" data-anchor-icon="#"></a></h4>
<ul>
<li>函數
<ul>
<li>StateBegin() State剛開始要執行的，例:遊戲數據載入.....</li>
<li>StateEnd()    State要結束要執行的，例:釋放GC的</li>
<li>StateUpdate() State每禎要執行的，例:遊戲進程</li>
</ul>
</li>
</ul>
<h4 id="toc_6">PBaseDefenseGame 裡面<a class="vnote-anchor" href="#toc_6" data-anchor-icon="#"></a></h4>
<ul>
<li>函式
<ul>
<li>void Initinal() 對應到StateBegin</li>
<li>void Release() 對應到StateEnd</li>
<li>void Update() 對應到StateUpdate</li>
</ul>
</li>
<li>實際上就是將BattleState裡的函式對應到外觀模式(PBaseDefenseGame)上的三個函式</li>
</ul>
<div class="plantuml-diagram"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="928.5px" preserveAspectRatio="none" style="width:585px;height:928px;" version="1.1" viewBox="0 0 585 928" width="585px" zoomAndPan="magnify" class="view-svg"><defs><filter height="300%" id="f1gx6u76802q6i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--MD5=[49367f88d513d90021b802ee0a6b77d5]
cluster Facade外觀模式--><polygon fill="#FFFFFF" filter="url(#f1gx6u76802q6i)" points="33,277.5,208.5,277.5,219,316.4106,552,316.4106,552,910.5,33,910.5,33,277.5" style="stroke: #000000; stroke-width: 2.25;"></polygon><line style="stroke: #000000; stroke-width: 2.25;" x1="33" x2="219" y1="316.4106" y2="316.4106"></line><text fill="#000000" font-family="sans-serif" font-size="21" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166.5" x="39" y="305.7964">Facade外觀模式</text><text fill="#000000" font-family="sans-serif" font-size="21" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67.5" x="264.75" y="344.707">«Rect»</text><!--MD5=[d6e7d65f18a88d4a5988beef91fa8368]
class PBaseDefenseGame--><rect fill="#FEFECE" filter="url(#f1gx6u76802q6i)" height="330.5134" id="PBaseDefenseGame" style="stroke: #A80036; stroke-width: 2.25;" width="369" x="106.5" y="364.5"></rect><ellipse cx="196.125" cy="388.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M202.3125,394.4297 Q201.7734,395.3672 200.5078,396.3281 Q198.3984,397.8516 194.2969,397.8516 Q191.0156,397.8516 188.8125,395.6484 Q186.2578,393.0938 186.2578,388.3125 Q186.2578,383.9063 188.7891,381.2109 Q191.1094,378.7734 194.4375,378.7734 Q197.25,378.7734 198.7266,379.2188 Q200.2031,379.6641 200.2031,379.6641 Q200.2031,379.6641 200.2031,378.8203 L201.7266,378.6797 L201.9609,384.7734 L199.9688,384.9609 Q198.75,379.5703 194.6484,379.5703 Q194.6484,379.5703 193.7578,379.9922 Q192.3984,380.5078 191.625,381.3281 Q189.5625,383.6484 189.5391,388.3594 Q189.5156,392.5313 191.8125,394.875 Q193.7578,396.8672 195,396.8672 Q198.0469,396.8672 201.3281,393.0234 L202.3125,394.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="177" x="226.875" y="397.3638">PBaseDefenseGame</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="108" x2="474" y1="412.5" y2="412.5"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="82.5" x="115.5" y="438.3757">書中例子中</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="351" x="115.5" y="461.877">負責與State溝通的外部程式碼(Facade外觀模式)</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="0" x="120" y="485.3782"></text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="297" x="115.5" y="508.8794">StateBegin(狀態機) ==&gt; Initinal(外觀模式)</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="0" x="120" y="532.3806"></text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="298.5" x="115.5" y="555.8818">StateEnd(狀態機) ==&gt; Release(外觀模式)</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="0" x="120" y="579.3831"></text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="315" x="115.5" y="602.8843">StateUpdate(狀態機) ==&gt; Update(外觀模式)</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="108" x2="474" y1="612.5098" y2="612.5098"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="115.5" y="638.3855">void Initinal()</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="105" x="115.5" y="661.8867">void Release()</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="97.5" x="115.5" y="685.3879">void Update()</text><!--MD5=[149913fe794b3f7cafce514aba7da160]
class SystemA--><rect fill="#FEFECE" filter="url(#f1gx6u76802q6i)" height="72" id="SystemA" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="57" y="814.5"></rect><ellipse cx="79.5" cy="838.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M85.6875,844.4297 Q85.1484,845.3672 83.8828,846.3281 Q81.7734,847.8516 77.6719,847.8516 Q74.3906,847.8516 72.1875,845.6484 Q69.6328,843.0938 69.6328,838.3125 Q69.6328,833.9063 72.1641,831.2109 Q74.4844,828.7734 77.8125,828.7734 Q80.625,828.7734 82.1016,829.2188 Q83.5781,829.6641 83.5781,829.6641 Q83.5781,829.6641 83.5781,828.8203 L85.1016,828.6797 L85.3359,834.7734 L83.3438,834.9609 Q82.125,829.5703 78.0234,829.5703 Q78.0234,829.5703 77.1328,829.9922 Q75.7734,830.5078 75,831.3281 Q72.9375,833.6484 72.9141,838.3594 Q72.8906,842.5313 75.1875,844.875 Q77.1328,846.8672 78.375,846.8672 Q81.4219,846.8672 84.7031,843.0234 L85.6875,844.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="72" x="100.5" y="847.3638">SystemA</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="58.5" x2="175.5" y1="862.5" y2="862.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="58.5" x2="175.5" y1="874.5" y2="874.5"></line><!--MD5=[671224af43726ee1a8f81bd7f50f65bc]
class SystemB--><rect fill="#FEFECE" filter="url(#f1gx6u76802q6i)" height="72" id="SystemB" style="stroke: #A80036; stroke-width: 2.25;" width="121.5" x="230.25" y="814.5"></rect><ellipse cx="252.75" cy="838.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M258.9375,844.4297 Q258.3984,845.3672 257.1328,846.3281 Q255.0234,847.8516 250.9219,847.8516 Q247.6406,847.8516 245.4375,845.6484 Q242.8828,843.0938 242.8828,838.3125 Q242.8828,833.9063 245.4141,831.2109 Q247.7344,828.7734 251.0625,828.7734 Q253.875,828.7734 255.3516,829.2188 Q256.8281,829.6641 256.8281,829.6641 Q256.8281,829.6641 256.8281,828.8203 L258.3516,828.6797 L258.5859,834.7734 L256.5938,834.9609 Q255.375,829.5703 251.2734,829.5703 Q251.2734,829.5703 250.3828,829.9922 Q249.0234,830.5078 248.25,831.3281 Q246.1875,833.6484 246.1641,838.3594 Q246.1406,842.5313 248.4375,844.875 Q250.3828,846.8672 251.625,846.8672 Q254.6719,846.8672 257.9531,843.0234 L258.9375,844.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="73.5" x="273.75" y="847.3638">SystemB</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="231.75" x2="350.25" y1="862.5" y2="862.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="231.75" x2="350.25" y1="874.5" y2="874.5"></line><!--MD5=[aaa73a23036fb8becdf1a66f3d1df0c5]
class SystemC--><rect fill="#FEFECE" filter="url(#f1gx6u76802q6i)" height="72" id="SystemC" style="stroke: #A80036; stroke-width: 2.25;" width="123" x="405" y="814.5"></rect><ellipse cx="427.5" cy="838.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M433.6875,844.4297 Q433.1484,845.3672 431.8828,846.3281 Q429.7734,847.8516 425.6719,847.8516 Q422.3906,847.8516 420.1875,845.6484 Q417.6328,843.0938 417.6328,838.3125 Q417.6328,833.9063 420.1641,831.2109 Q422.4844,828.7734 425.8125,828.7734 Q428.625,828.7734 430.1016,829.2188 Q431.5781,829.6641 431.5781,829.6641 Q431.5781,829.6641 431.5781,828.8203 L433.1016,828.6797 L433.3359,834.7734 L431.3438,834.9609 Q430.125,829.5703 426.0234,829.5703 Q426.0234,829.5703 425.1328,829.9922 Q423.7734,830.5078 423,831.3281 Q420.9375,833.6484 420.9141,838.3594 Q420.8906,842.5313 423.1875,844.875 Q425.1328,846.8672 426.375,846.8672 Q429.4219,846.8672 432.7031,843.0234 L433.6875,844.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="75" x="448.5" y="847.3638">SystemC</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="406.5" x2="526.5" y1="862.5" y2="862.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="406.5" x2="526.5" y1="874.5" y2="874.5"></line><!--MD5=[dc4994b61921cc0ba900b8b8f2fc6d4d]
class BattleState--><rect fill="#FEFECE" filter="url(#f1gx6u76802q6i)" height="166.0049" id="BattleState" style="stroke: #A80036; stroke-width: 2.25;" width="234" x="174" y="12"></rect><ellipse cx="240.375" cy="36" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M246.5625,41.9297 Q246.0234,42.8672 244.7578,43.8281 Q242.6484,45.3516 238.5469,45.3516 Q235.2656,45.3516 233.0625,43.1484 Q230.5078,40.5938 230.5078,35.8125 Q230.5078,31.4063 233.0391,28.7109 Q235.3594,26.2734 238.6875,26.2734 Q241.5,26.2734 242.9766,26.7188 Q244.4531,27.1641 244.4531,27.1641 Q244.4531,27.1641 244.4531,26.3203 L245.9766,26.1797 L246.2109,32.2734 L244.2188,32.4609 Q243,27.0703 238.8984,27.0703 Q238.8984,27.0703 238.0078,27.4922 Q236.6484,28.0078 235.875,28.8281 Q233.8125,31.1484 233.7891,35.8594 Q233.7656,40.0313 236.0625,42.375 Q238.0078,44.3672 239.25,44.3672 Q242.2969,44.3672 245.5781,40.5234 L246.5625,41.9297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="88.5" x="271.125" y="44.8638">BattleState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="175.5" x2="406.5" y1="60" y2="60"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="49.5" x="183" y="85.8757">狀態機</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="175.5" x2="406.5" y1="95.5012" y2="95.5012"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="205.5" x="183" y="121.377">public override  StateBegin()</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="192" x="183" y="144.8782">public override  StateEnd()</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="216" x="183" y="168.3794">public override  StateUpdate()</text><!--MD5=[c44e56701b6a26a7b98269349dbac535]
link BattleState to PBaseDefenseGame--><path d="M291,178.8795 C291,229.047 291,295.1085 291,356.256 " fill="none" id="BattleState->PBaseDefenseGame" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="291,364.4595,297,350.9595,291,356.9595,285,350.9595,291,364.4595" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="292.5" y="248.4895">使用Facade腳本</text><!--MD5=[bd16bcd6b7a44ba151cc83f4c8bee8e3]
link PBaseDefenseGame to SystemA--><path d="M201.4515,694.6575 C178.575,736.4655 155.9351,777.843 139.8632,807.2157 " fill="none" id="PBaseDefenseGame->SystemA" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="135.9225,814.4177,147.6663,805.4547,139.5226,807.8382,137.1391,799.6945,135.9225,814.4177" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="175.5" y="764.4895">控制</text><!--MD5=[7cc6356cfa5de918f9aee31e2805ecf0]
link PBaseDefenseGame to SystemB--><path d="M291,694.6575 C291,736.11 291,777.141 291,806.4663 " fill="none" id="PBaseDefenseGame->SystemB" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="291,814.4177,297,800.9177,291,806.9177,285,800.9177,291,814.4177" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="292.5" y="764.4895">控制</text><!--MD5=[69947f20202018838316a0ad3bea1da5]
link PBaseDefenseGame to SystemC--><path d="M381.321,694.6575 C404.394,736.4655 427.23,777.843 443.4405,807.2157 " fill="none" id="PBaseDefenseGame->SystemC" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="447.414,814.4177,446.1433,799.6991,443.7897,807.8515,435.6374,805.4979,447.414,814.4177" style="stroke: #A80036; stroke-width: 1.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="39" x="420" y="764.4895">控制</text><!--MD5=[02e23d31420f47744f70df071d0d2620]
@startuml
skinparam classAttributeIconSize 0
scale 1.5
class BattleState{
狀態機
__
public override  StateBegin()
public override  StateEnd()
public override  StateUpdate()
}

package Facade外觀模式 <<Rect>> {
class PBaseDefenseGame
class SystemA
class SystemB
class SystemC
}

class PBaseDefenseGame{
書中例子中
負責與State溝通的外部程式碼(Facade外觀模式)

StateBegin(狀態機) ==> Initinal(外觀模式)

StateEnd(狀態機) ==> Release(外觀模式)

StateUpdate(狀態機) ==> Update(外觀模式)
__
void Initinal()
void Release()
void Update()
}
class SystemA{
}
class SystemB{
}
class SystemC{
}

BattleState - -> PBaseDefenseGame :使用Facade腳本
PBaseDefenseGame - -> SystemA:控制
PBaseDefenseGame - -> SystemB:控制
PBaseDefenseGame - -> SystemC:控制


@enduml

PlantUML version 1.2020.00(Sat Jan 11 20:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_231-b11
Operating System: Windows 10
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg></div>
<h4 id="toc_7">案例中時序圖<a class="vnote-anchor" href="#toc_7" data-anchor-icon="#"></a></h4>
<div class="plantuml-diagram"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="798px" preserveAspectRatio="none" style="width:1141px;height:798px;" version="1.1" viewBox="0 0 1141 798" width="1141.5px" zoomAndPan="magnify" class="view-svg"><defs><filter height="300%" id="f1ohz5u9fisgl4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ohz5u9fisgl4)" height="128.3225" style="stroke: #000000; stroke-width: 3.0;" width="933.75" x="192" y="160.4106"></rect><rect fill="#FFFFFF" filter="url(#f1ohz5u9fisgl4)" height="177.0967" style="stroke: #000000; stroke-width: 3.0;" width="1106.25" x="19.5" y="309.7332"></rect><rect fill="#FFFFFF" filter="url(#f1ohz5u9fisgl4)" height="128.3225" style="stroke: #000000; stroke-width: 3.0;" width="933.75" x="192" y="507.8298"></rect><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="61.5" x2="61.5" y1="134.9106" y2="661.6523"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="271.5" x2="271.5" y1="134.9106" y2="661.6523"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="578.25" x2="578.25" y1="134.9106" y2="661.6523"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="1022.25" x2="1022.25" y1="134.9106" y2="661.6523"></line><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="46.5" x="34.5" y="130.2964">Unity</text><ellipse cx="62.25" cy="19.5" fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 3.0;"></ellipse><path d="M62.25,31.5 L62.25,72 M42.75,43.5 L81.75,43.5 M62.25,72 L42.75,94.5 M62.25,72 L81.75,94.5 " fill="none" filter="url(#f1ohz5u9fisgl4)" style="stroke: #A80036; stroke-width: 3.0;"></path><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="46.5" x="34.5" y="685.4487">Unity</text><ellipse cx="62.25" cy="705.063" fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 3.0;"></ellipse><path d="M62.25,717.063 L62.25,757.563 M42.75,729.063 L81.75,729.063 M62.25,757.563 L42.75,780.063 M62.25,757.563 L81.75,780.063 " fill="none" filter="url(#f1ohz5u9fisgl4)" style="stroke: #A80036; stroke-width: 3.0;"></path><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="124.5" x="207" y="76.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="103.5" x="217.5" y="112.2964">BattleState</text><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="124.5" x="207" y="660.1523"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="103.5" x="217.5" y="695.9487">BattleState</text><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="219" x="465.75" y="76.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="198" x="476.25" y="112.2964">PBaseDefenseGame</text><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="219" x="465.75" y="660.1523"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="198" x="476.25" y="695.9487">PBaseDefenseGame</text><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="165" x="939.75" y="70.5"></rect><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="165" x="933.75" y="76.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="144" x="944.25" y="112.2964">AnotherSystem</text><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="165" x="939.75" y="660.1523"></rect><rect fill="#FEFECE" filter="url(#f1ohz5u9fisgl4)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="165" x="933.75" y="666.1523"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="144" x="944.25" y="701.9487">AnotherSystem</text><path d="M192,160.4106 L364.5,160.4106 L364.5,175.4106 L349.5,190.4106 L192,190.4106 L192,160.4106 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.5;"></path><rect fill="none" height="128.3225" style="stroke: #000000; stroke-width: 3.0;" width="933.75" x="192" y="160.4106"></rect><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="214.5" y="185.4001">狀態剛開始</text><polygon fill="#A80036" points="560.25,221.959,575.25,227.959,560.25,233.959,566.25,227.959" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.25" x2="569.25" y1="227.959" y2="227.959"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="282.75" y="220.6743">1</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="219" x="299.25" y="220.6743">StateBegin 狀態開始函式</text><polygon fill="#A80036" points="1004.25,270.7332,1019.25,276.7332,1004.25,282.7332,1010.25,276.7332" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.25" x2="1013.25" y1="276.7332" y2="276.7332"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="588.75" y="269.4485">2</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="340.5" x="605.25" y="269.4485">Initinal 外觀函式開始 控制其他系統開始</text><path d="M19.5,309.7332 L196.5,309.7332 L196.5,324.7332 L181.5,339.7332 L19.5,339.7332 L19.5,309.7332 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.5;"></path><rect fill="none" height="177.0967" style="stroke: #000000; stroke-width: 3.0;" width="1106.25" x="19.5" y="309.7332"></rect><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109.5" x="42" y="334.7227">狀態Update</text><polygon fill="#A80036" points="254.25,371.2815,269.25,377.2815,254.25,383.2815,260.25,377.2815" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="62.25" x2="263.25" y1="377.2815" y2="377.2815"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="72.75" y="369.9968">1</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="89.25" y="369.9968">Unity Update 開始</text><polygon fill="#A80036" points="560.25,420.0557,575.25,426.0557,560.25,432.0557,566.25,426.0557" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.25" x2="569.25" y1="426.0557" y2="426.0557"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="282.75" y="418.771">2</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="253.5" x="299.25" y="418.771">StateUpdate 狀態Update函式</text><polygon fill="#A80036" points="1004.25,468.8298,1019.25,474.8298,1004.25,480.8298,1010.25,474.8298" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.25" x2="1013.25" y1="474.8298" y2="474.8298"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="588.75" y="467.5452">3</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="391.5" x="605.25" y="467.5452">Update 外觀Update函式 控制其他系統Update</text><path d="M192,507.8298 L343.5,507.8298 L343.5,522.8298 L328.5,537.8298 L192,537.8298 L192,507.8298 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.5;"></path><rect fill="none" height="128.3225" style="stroke: #000000; stroke-width: 3.0;" width="933.75" x="192" y="507.8298"></rect><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="214.5" y="532.8193">狀態結束</text><polygon fill="#A80036" points="560.25,569.3782,575.25,575.3782,560.25,581.3782,566.25,575.3782" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.25" x2="569.25" y1="575.3782" y2="575.3782"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="282.75" y="568.0935">1</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="204" x="299.25" y="568.0935">StateEnd 狀態結束函式</text><polygon fill="#A80036" points="1004.25,618.1523,1019.25,624.1523,1004.25,630.1523,1010.25,624.1523" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.25" x2="1013.25" y1="624.1523" y2="624.1523"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="588.75" y="616.8677">2</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="355.5" x="605.25" y="616.8677">Release 外觀函式結束 控制其他系統結束</text><!--MD5=[c03f0e4c45cb29adc00dd355f82606a2]
@startuml
scale 1.5

actor Unity
participant BattleState
participant PBaseDefenseGame
collections AnotherSystem

autonumber 1
group 狀態剛開始
BattleState -> PBaseDefenseGame : StateBegin 狀態開始函式
PBaseDefenseGame ->AnotherSystem : Initinal 外觀函式開始 控制其他系統開始 
end

autonumber 1
group 狀態Update
Unity -> BattleState : Unity Update 開始
BattleState -> PBaseDefenseGame :StateUpdate 狀態Update函式
PBaseDefenseGame ->AnotherSystem:Update 外觀Update函式 控制其他系統Update
end

autonumber 1
group 狀態結束
BattleState -> PBaseDefenseGame : StateEnd 狀態結束函式
PBaseDefenseGame ->AnotherSystem : Release 外觀函式結束 控制其他系統結束
end

@enduml

PlantUML version 1.2020.00(Sat Jan 11 20:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_231-b11
Operating System: Windows 10
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg></div>

    </div>
</div>
</div>

<div id="container-floating" style="display:none;" class="d-none d-md-block d-xl-block">
    <div id="floating-button" onclick="toggleMore()">
        <p id="floating-more" class="more">&gt;</p>
    </div>
</div>

<!--
<div class="footer" id="vnote-footer">
    <p>Generated by <em><a href="https://tamlok.github.io/vnote/">VNote</a></em>.</p>
</div>
-->
</body>
</html>
