<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="generator" content="VNote">

    <title>09.AI狀態模式 State</title>
    <link rel="icon" href="https://github.com/tamlok/vnote/raw/master/src/resources/icons/vnote.ico">

    <style type="text/css">
    /* STYLE_GLOBAL_PLACE_HOLDER */
    </style>

    <style type="text/css">
    *,
*::before,
*::after {
  box-sizing: border-box;
}

.container-fluid {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}

.col, .col-1, .col-10, .col-11, .col-12, .col-2, .col-3, .col-4, .col-5, .col-6, .col-7, .col-8, .col-9, .col-auto, .col-lg, .col-lg-1, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-auto, .col-md, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-auto, .col-sm, .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-auto, .col-xl, .col-xl-1, .col-xl-10, .col-xl-11, .col-xl-12, .col-xl-2, .col-xl-3, .col-xl-4, .col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-auto {
    position: relative;
    width: 100%;
    min-height: 1px;
    padding-right: 15px;
    padding-left: 15px;
}

.col-12 {
    -webkit-box-flex: 0;
    -ms-flex: 0 0 100%;
    flex: 0 0 100%;
    max-width: 100%;
}

@media (min-width: 768px) {
    .col-md-3 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 25%;
    }
}

@media (min-width: 768px) {
    .col-md-9 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 75%;
        flex: 0 0 75%;
        max-width: 75%;
    }
}

@media (min-width: 1200px) {
    .col-xl-2 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 16.666667%;
        flex: 0 0 16.666667%;
        max-width: 16.666667%;
    }
}

@media (min-width: 1200px) {
    .col-xl-10 {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 83.333333%;
        flex: 0 0 83.333333%;
        max-width: 83.333333%;
    }
}

@media (min-width: 768px) {
    .pt-md-3, .py-md-3 {
        padding-top: 1rem!important;
    }
}

@media (min-width: 768px) {
    .pb-md-3, .py-md-3 {
        padding-bottom: 1rem!important;
    }
}

@media (min-width: 768px) {
    .pl-md-5, .px-md-5 {
        padding-left: 3rem!important;
    }
}

.d-none {
    display: none!important;
}

@media (min-width: 1200px) {
    .d-xl-block {
        display: block!important;
    }
}

@media (min-width: 768px) {
    .d-md-block {
        display: block!important;
    }
}

.bd-content {
    -webkit-box-ordinal-group: 1;
    -ms-flex-order: 0;
    order: 0;
}

.bd-toc {
    position: -webkit-sticky;
    position: sticky;
    top: 4rem;
    height: calc(100vh - 10rem);
    overflow-y: auto;
}

.bd-toc {
    -webkit-box-ordinal-group: 2;
    -ms-flex-order: 1;
    order: 1;
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
    font-size: .875rem;
}

.section-nav {
    padding-left: 0;
}

.section-nav ul {
    font-size: .875rem;
    list-style-type: none;
}

.section-nav li {
    font-size: .875rem;
}

.section-nav a {
    color: inherit !important;
}

.row {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
}

@media (min-width: 1200px) {
    .flex-xl-nowrap {
        flex-wrap: nowrap !important;
    }
}

#floating-button {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background: #00897B;
    position: fixed;
    top: .5rem;
    right: .5rem;
    cursor: pointer;
    box-shadow: 0px 2px 5px #666;
}

#floating-button .more {
    color: #F5F5F5;
    position: absolute;
    top: 0;
    display: block;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    padding: 0;
    margin: 0;
    line-height: 2.5rem;
    font-size: 2rem;
    font-family: 'monospace';
    font-weight: 300;
}

.hide-none {
    display: none !important;
}

.col-expand {
    -webkit-box-flex: 0;
    -ms-flex: 0 0 100% !important;
    flex: 0 0 100% !important;
    max-width: 100% !important;
    padding-right: 3rem !important;
}

.outline-bold {
    font-weight: bolder !important;
}

@media print {
    #floating-button {
        display: none !important;
    }
}

    @keyframes flash { 
  0% { color: rgb(128, 203, 196); }
  10% { color: rgb(0, 137, 123); }
  40% { color: rgb(0, 137, 123); }
  50% { color: rgb(128, 203, 196); }
  60% { color: rgb(0, 137, 123); }
  90% { color: rgb(0, 137, 123); }
}
.highlighted-anchor { animation: flash 1s; }
div.mark-rect { background: transparent; border: 5px solid rgb(87, 104, 196); border-radius: 2px; position: absolute; }
#vnote-footer { width: 100%; text-align: center; opacity: 0.2; margin-top: 3rem; }
#vnote-footer p { font-size: 0.8rem; }
#vnote-footer a { color: inherit !important; }
x-eqs { display: flex; flex-direction: row; align-content: space-between; align-items: center; }
x-eqs > x-eqn { width: 100%; margin-left: 3rem; }
x-eqs > span { text-align: right; }
.view-image, .view-svg { transition: 0.3s; }
.modal-box { display: none; position: fixed; z-index: 1000; padding-top: 50px; left: 0px; top: 0px; width: 100%; height: 100%; overflow: hidden; background-color: rgba(68, 68, 68, 0.952941); }
.modal-content { margin: auto; display: block; width: auto; height: auto; cursor: move; }
.modal-content { animation-name: zoom; animation-duration: 0.6s; }
@-webkit-keyframes zoom { 
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}
@keyframes zoom { 
  0% { transform: scale(0); }
  100% { transform: scale(1); }
}
span.modal-close { position: absolute; z-index: 1000; top: 15px; right: 35px; color: rgb(218, 218, 218); font-size: 40px; font-weight: bold; transition: 0.3s; }
span.modal-close:hover, span.modal-close:focus { color: rgb(238, 238, 238); text-decoration: none; cursor: pointer; }
@media print {
  pre, pre code, td.hljs-ln-code { white-space: pre-wrap !important; word-break: break-all !important; }
  code, a { word-break: break-all !important; }
  div.flowchart-diagram, div.mermaid-diagram, div.plantuml-diagram { overflow: hidden !important; }
  img { max-width: 100% !important; height: auto !important; }
  #vnote-footer { display: none !important; }
}
.alert { position: relative; padding: 0.75rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: 0.25rem; }
.alert-primary { color: rgb(0, 64, 133); background-color: rgb(204, 229, 255); border-color: rgb(184, 218, 255); }
.alert-secondary { color: rgb(56, 61, 65); background-color: rgb(226, 227, 229); border-color: rgb(214, 216, 219); }
.alert-success { color: rgb(21, 87, 36); background-color: rgb(212, 237, 218); border-color: rgb(195, 230, 203); }
.alert-info { color: rgb(12, 84, 96); background-color: rgb(209, 236, 241); border-color: rgb(190, 229, 235); }
.alert-warning { color: rgb(133, 100, 4); background-color: rgb(255, 243, 205); border-color: rgb(255, 238, 186); }
.alert-danger { color: rgb(114, 28, 36); background-color: rgb(248, 215, 218); border-color: rgb(245, 198, 203); }
.alert-light { color: rgb(129, 129, 130); background-color: rgb(254, 254, 254); border-color: rgb(253, 253, 254); }
.alert-dark { color: rgb(27, 30, 33); background-color: rgb(214, 216, 217); border-color: rgb(198, 200, 202); }
.vnote-anchor { font-weight: 400; color: rgba(0, 123, 255, 0.498039); transition: color 0.16s linear; padding-left: 0.375em; -webkit-font-smoothing: antialiased; text-decoration: none; opacity: 0; }
.vnote-anchor:hover { color: rgb(0, 123, 255); text-decoration: none; opacity: 1; }
.vnote-anchor::after { content: attr(data-anchor-icon); }
.vnote-btn { position: relative; display: inline-block; padding: 6px 12px; font-size: 13px; font-weight: 700; line-height: 20px; white-space: nowrap; vertical-align: middle; cursor: pointer; border: none; user-select: none; -webkit-appearance: none; }
.vnote-copy-clipboard-btn { transition: opacity 0.3s ease-in-out; opacity: 0; padding: 2px 6px; position: absolute; top: 5px; right: 5px; }
pre:hover .vnote-copy-clipboard-btn { opacity: 1; }
pre.vnote-snippet { position: relative; }
body { margin: 0px auto; font-family: "Segoe UI", Helvetica, sans-serif, Tahoma, Arial, Geneva, Georgia, Palatino, "Times New Roman", "Hiragino Sans GB", 冬青黑体, "Microsoft YaHei", 微软雅黑, "Microsoft YaHei UI", "WenQuanYi Micro Hei", 文泉驿雅黑, Dengxian, 等线体, STXihei, 华文细黑, "Liberation Sans", "Droid Sans", NSimSun, 新宋体, SimSun, 宋体; color: rgb(34, 34, 34); line-height: 1.5; padding: 15px; background: rgb(238, 238, 238); font-size: 16px; }
h1, h2, h3, h4, h5, h6 { color: rgb(34, 34, 34); font-weight: bold; margin-top: 20px; margin-bottom: 10px; padding: 0px; }
p { padding: 0px; margin-top: 16px; margin-bottom: 16px; }
h1 { font-size: 26px; }
h2 { font-size: 24px; }
h3 { font-size: 22px; }
h4 { font-size: 20px; }
h5 { font-size: 19px; }
h6 { font-size: 18px; }
a { color: rgb(0, 153, 255); margin: 0px; padding: 0px; vertical-align: baseline; text-decoration: none; word-break: break-word; }
a:hover { text-decoration: underline; color: rgb(255, 102, 0); }
a:visited { color: purple; }
ul, ol { padding: 0px 0px 0px 24px; }
li { line-height: 24px; }
li ul, li ol { margin-left: 16px; }
p, ul, ol { font-size: 16px; line-height: 24px; }
pre { display: block; overflow-y: hidden; overflow-x: auto; tab-size: 4; }
code { font-family: Consolas, Monaco, monospace, Courier; color: rgb(142, 36, 170); word-break: break-word; }
pre code { display: block; overflow-x: auto; padding: 0.5em; color: rgb(34, 34, 34); background-color: rgb(224, 224, 224); border-left: 0.5em solid rgb(0, 137, 123); line-height: 1.5; font-family: Consolas, Monaco, monospace, Courier; white-space: pre; tab-size: 4; }
pre code.markdown-metadata { border-left: 0.5em solid rgb(128, 203, 196); }
aside { display: block; float: right; width: 390px; }
blockquote { color: rgb(102, 102, 102); border-left: 0.5em solid rgb(122, 122, 122); padding: 0px 1em; margin-left: 0px; }
blockquote p { color: rgb(102, 102, 102); }
hr { display: block; text-align: left; margin: 1em 0px; border: none; height: 2px; background: rgb(153, 153, 153); }
table { padding: 0px; margin: 1rem 0.5rem; border-collapse: collapse; }
table tr { border-top: 2px solid rgb(204, 204, 204); background-color: white; margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 2px solid rgb(204, 204, 204); margin: 0px; padding: 6px 13px; }
table tr td { border: 2px solid rgb(204, 204, 204); margin: 0px; padding: 6px 13px; }
table tr th :first-child, table tr td :first-child { margin-top: 0px; }
table tr th :last-child, table tr td :last-child { margin-bottom: 0px; }
div.mermaid-diagram { margin: 16px 0px; overflow-y: hidden; }
div.flowchart-diagram { padding: 0px 5px; margin: 16px 0px; width: fit-content; overflow: hidden; }
div.wavedrom-diagram { padding: 0px 5px; margin: 16px 0px; width: fit-content; overflow: hidden; }
div.plantuml-diagram { padding: 5px 5px 0px; margin: 16px 0px; width: fit-content; overflow: hidden; }
.img-package { text-align: center; }
img.img-center { display: block; margin-left: auto; margin-right: auto; }
span.img-caption { min-width: 20%; max-width: 80%; display: inline-block; padding: 10px; margin: 0px auto; border-bottom: 1px solid rgb(192, 192, 192); color: rgb(108, 108, 108); text-align: center; line-height: 1.5; }
.emoji_zero, .emoji_one, .emoji_two, .emoji_three, .emoji_four, .emoji_five, .emoji_six, .emoji_seven, .emoji_eight, .emoji_nine { margin-left: 5px; margin-right: 8px; }
div.preview-hint { opacity: 0.5; margin-top: 30%; margin-bottom: 30%; align-items: center; display: flex; flex-direction: column; justify-content: center; }
table.hljs-ln tr { border: none; background-color: transparent; }
table.hljs-ln tr td { border: none; background-color: transparent; }
table.hljs-ln tr td.hljs-ln-numbers { user-select: none; text-align: center; color: rgb(170, 170, 170); border-right: 1px solid rgb(204, 204, 204); vertical-align: top; padding-right: 5px; white-space: nowrap; }
table.hljs-ln tr td.hljs-ln-code { padding-left: 10px; }
::-webkit-scrollbar { background-color: rgb(234, 234, 234); width: 14px; height: 14px; border: none; }
::-webkit-scrollbar-corner { background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-button { height: 14px; width: 14px; background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-button:hover { background-color: rgb(208, 208, 208); }
::-webkit-scrollbar-button:active { background-color: rgb(178, 178, 178); }
::-webkit-scrollbar-track { background-color: rgb(234, 234, 234); }
::-webkit-scrollbar-thumb { border: none; background-color: rgb(218, 218, 218); }
::-webkit-scrollbar-thumb:hover { background-color: rgb(208, 208, 208); }
::-webkit-scrollbar-thumb:active { background-color: rgb(178, 178, 178); }
::-webkit-scrollbar-button:horizontal:increment { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(-90 256.00000000000006,256) " id="svg_1">   <polygon fill="%23333333" id="svg_2" points="128,192 256,320 384,192  "/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:horizontal:decrement { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(90 255.99999999999997,256.00000000000006) " id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:vertical:increment { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="null" id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::-webkit-scrollbar-button:vertical:decrement { background-image: url('data:image/svg+xml;utf8,<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g>    <g transform="rotate(180 255.99999999999997,256) " id="svg_1">   <polygon points="128,192 256,320 384,192  " id="svg_2" fill="%23333333"/>  </g> </g></svg>'); background-repeat: no-repeat; background-size: contain; }
::selection { background: rgb(25, 118, 210); color: rgb(238, 238, 238); }
.modal-box { background-color: rgba(234, 234, 234, 0.952941); }
span.modal-close { color: rgb(102, 102, 102); }
span.modal-close:hover, span.modal-close:focus { color: rgb(34, 34, 34); }
.hljs { display: block; overflow-x: auto; padding: 0.5em; background: rgb(224, 224, 224); }
.hljs, .hljs-subst { color: rgb(54, 54, 54); }
.hljs-comment { color: rgb(118, 118, 118); }
.hljs-keyword, .hljs-attribute, .hljs-selector-tag, .hljs-meta-keyword, .hljs-doctag, .hljs-name { color: rgb(0, 0, 238); }
.hljs-type, .hljs-string, .hljs-number, .hljs-selector-id, .hljs-selector-class, .hljs-quote, .hljs-template-tag, .hljs-deletion { color: rgb(136, 0, 0); }
.hljs-title, .hljs-section { color: rgb(136, 0, 0); font-weight: bold; }
.hljs-regexp, .hljs-symbol, .hljs-variable, .hljs-template-variable, .hljs-link, .hljs-selector-attr, .hljs-selector-pseudo { color: rgb(188, 96, 96); }
.hljs-literal { color: rgb(175, 0, 215); }
.hljs-built_in, .hljs-bullet, .hljs-code, .hljs-addition { color: rgb(0, 135, 0); }
.hljs-meta { color: rgb(31, 113, 153); }
.hljs-meta-string { color: rgb(77, 153, 191); }
.hljs-emphasis { font-style: italic; }
.hljs-strong { font-weight: bold; }
.mermaid-diagram .mermaid .label { color: rgb(51, 51, 51); }
.mermaid-diagram .node rect, .mermaid-diagram .node circle, .mermaid-diagram .node ellipse, .mermaid-diagram .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px; }
.mermaid-diagram .edgePath .path { stroke: rgb(51, 51, 51); }
.mermaid-diagram .edgeLabel { background-color: rgb(232, 232, 232); }
.mermaid-diagram .cluster rect { fill: rgb(255, 255, 222) !important; rx: 4 !important; stroke: rgb(170, 170, 51) !important; stroke-width: 1px !important; }
.mermaid-diagram .cluster text { fill: rgb(51, 51, 51); }
.mermaid-diagram .actor { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255); }
.mermaid-diagram text.actor { fill: black; stroke: none; }
.mermaid-diagram .actor-line { stroke: grey; }
.mermaid-diagram .messageLine0 { stroke-width: 1.5; stroke: rgb(51, 51, 51); }
.mermaid-diagram .messageLine1 { stroke-width: 1.5; stroke: rgb(51, 51, 51); }
.mermaid-diagram #arrowhead { fill: rgb(51, 51, 51); }
.mermaid-diagram #crosshead path { fill: rgb(51, 51, 51) !important; stroke: rgb(51, 51, 51) !important; }
.mermaid-diagram .messageText { fill: rgb(51, 51, 51); stroke: none; }
.mermaid-diagram .labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255); }
.mermaid-diagram .labelText { fill: black; stroke: none; }
.mermaid-diagram .loopText { fill: black; stroke: none; }
.mermaid-diagram .loopLine { stroke-width: 2; stroke: rgb(204, 204, 255); }
.mermaid-diagram .note { stroke: rgb(170, 170, 51); fill: rgb(255, 245, 173); }
.mermaid-diagram .noteText { fill: black; stroke: none; font-family: "trebuchet ms", verdana, arial; font-size: 14px; }
.mermaid-diagram .section { stroke: none; opacity: 0.2; }
.mermaid-diagram .section0 { fill: rgba(102, 102, 255, 0.490196); }
.mermaid-diagram .section2 { fill: rgb(255, 244, 0); }
.mermaid-diagram .section1, .mermaid-diagram .section3 { fill: white; opacity: 0.2; }
.mermaid-diagram .sectionTitle0 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle1 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle2 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle3 { fill: rgb(51, 51, 51); }
.mermaid-diagram .sectionTitle { text-anchor: start; font-size: 11px; }
.mermaid-diagram .grid .tick { stroke: lightgrey; opacity: 0.3; shape-rendering: crispEdges; }
.mermaid-diagram .grid path { stroke-width: 0; }
.mermaid-diagram .today { fill: none; stroke: red; stroke-width: 2px; }
.mermaid-diagram .task { stroke-width: 2; }
.mermaid-diagram .taskText { text-anchor: middle; font-size: 11px; }
.mermaid-diagram .taskTextOutsideRight { fill: black; text-anchor: start; font-size: 11px; }
.mermaid-diagram .taskTextOutsideLeft { fill: black; text-anchor: end; font-size: 11px; }
.mermaid-diagram .taskText0, .mermaid-diagram .taskText1, .mermaid-diagram .taskText2, .mermaid-diagram .taskText3 { fill: white; }
.mermaid-diagram .task0, .mermaid-diagram .task1, .mermaid-diagram .task2, .mermaid-diagram .task3 { fill: rgb(138, 144, 221); stroke: rgb(83, 79, 188); }
.mermaid-diagram .taskTextOutside0, .mermaid-diagram .taskTextOutside2 { fill: black; }
.mermaid-diagram .taskTextOutside1, .mermaid-diagram .taskTextOutside3 { fill: black; }
.mermaid-diagram .active0, .mermaid-diagram .active1, .mermaid-diagram .active2, .mermaid-diagram .active3 { fill: rgb(191, 199, 255); stroke: rgb(83, 79, 188); }
.mermaid-diagram .activeText0, .mermaid-diagram .activeText1, .mermaid-diagram .activeText2, .mermaid-diagram .activeText3 { fill: black !important; }
.mermaid-diagram .done0, .mermaid-diagram .done1, .mermaid-diagram .done2, .mermaid-diagram .done3 { stroke: grey; fill: lightgrey; stroke-width: 2; }
.mermaid-diagram .doneText0, .mermaid-diagram .doneText1, .mermaid-diagram .doneText2, .mermaid-diagram .doneText3 { fill: black !important; }
.mermaid-diagram .crit0, .mermaid-diagram .crit1, .mermaid-diagram .crit2, .mermaid-diagram .crit3 { stroke: rgb(255, 136, 136); fill: red; stroke-width: 2; }
.mermaid-diagram .activeCrit0, .mermaid-diagram .activeCrit1, .mermaid-diagram .activeCrit2, .mermaid-diagram .activeCrit3 { stroke: rgb(255, 136, 136); fill: rgb(191, 199, 255); stroke-width: 2; }
.mermaid-diagram .doneCrit0, .mermaid-diagram .doneCrit1, .mermaid-diagram .doneCrit2, .mermaid-diagram .doneCrit3 { stroke: rgb(255, 136, 136); fill: lightgrey; stroke-width: 2; cursor: pointer; shape-rendering: crispEdges; }
.mermaid-diagram .doneCritText0, .mermaid-diagram .doneCritText1, .mermaid-diagram .doneCritText2, .mermaid-diagram .doneCritText3 { fill: black !important; }
.mermaid-diagram .activeCritText0, .mermaid-diagram .activeCritText1, .mermaid-diagram .activeCritText2, .mermaid-diagram .activeCritText3 { fill: black !important; }
.mermaid-diagram .titleText { text-anchor: middle; font-size: 18px; fill: black; }
.mermaid-diagram .node text { font-family: "trebuchet ms", verdana, arial; font-size: 14px; }
.mermaid-diagram div.mermaidTooltip { position: absolute; text-align: center; max-width: 200px; padding: 2px; font-family: "trebuchet ms", verdana, arial; font-size: 12px; background: rgb(255, 255, 222); border: 1px solid rgb(170, 170, 51); border-radius: 2px; pointer-events: none; z-index: 100; }
.hljs-ln { border-collapse: collapse; }
.hljs-ln td { padding: 0px; }
.hljs-ln-n::before { content: attr(data-line-number); }
.MathJax_Hover_Frame { border-radius: 0.25em; box-shadow: rgb(136, 51, 170) 0px 0px 15px; display: inline-block; position: absolute; border: 1px solid rgb(170, 102, 221) !important; }
.MathJax_Menu_Button .MathJax_Hover_Arrow { position: absolute; cursor: pointer; display: inline-block; border: 2px solid rgb(170, 170, 170); border-radius: 4px; font-family: "Courier New", Courier; font-size: 9px; color: rgb(240, 240, 240); }
.MathJax_Menu_Button .MathJax_Hover_Arrow span { display: block; background-color: rgb(170, 170, 170); border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px; }
.MathJax_Hover_Arrow:hover { color: white !important; border: 2px solid rgb(204, 204, 204) !important; }
.MathJax_Hover_Arrow:hover span { background-color: rgb(204, 204, 204) !important; }
#MathJax_About { position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: rgb(221, 221, 221); color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
#MathJax_About.MathJax_MousePost { outline: none; }
.MathJax_Menu { position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid rgb(204, 204, 204); margin: 0px; cursor: default; font-style: normal; font-weight: normal; font-size: 15px; font-family: "Microsoft JhengHei UI"; font-stretch: normal; font-variant: normal; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: rgb(128, 128, 128) 0px 10px 20px; }
.MathJax_MenuItem { padding: 2px 2em; background: transparent; }
.MathJax_MenuArrow { position: absolute; right: 0.5em; padding-top: 0.25em; color: rgb(102, 102, 102); font-size: 0.75em; }
.MathJax_MenuActive .MathJax_MenuArrow { color: white; }
.MathJax_MenuArrow.RTL { left: 0.5em; right: auto; }
.MathJax_MenuCheck { position: absolute; left: 0.7em; }
.MathJax_MenuCheck.RTL { right: 0.7em; left: auto; }
.MathJax_MenuRadioCheck { position: absolute; left: 1em; }
.MathJax_MenuRadioCheck.RTL { right: 1em; left: auto; }
.MathJax_MenuLabel { padding: 2px 2em 4px 1.33em; font-style: italic; }
.MathJax_MenuRule { border-top: 1px solid rgb(204, 204, 204); margin: 4px 1px 0px; }
.MathJax_MenuDisabled { color: graytext; }
.MathJax_MenuActive { background-color: highlight; color: highlighttext; }
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus { background-color: rgb(232, 232, 232); }
.MathJax_ContextMenu:focus { outline: none; }
.MathJax_ContextMenu .MathJax_MenuItem:focus { outline: none; }
#MathJax_AboutClose { top: 0.2em; right: 0.2em; }
.MathJax_Menu .MathJax_MenuClose { top: -10px; left: -10px; }
.MathJax_MenuClose { position: absolute; cursor: pointer; display: inline-block; border: 2px solid rgb(170, 170, 170); border-radius: 18px; font-family: "Courier New", Courier; font-size: 24px; color: rgb(240, 240, 240); }
.MathJax_MenuClose span { display: block; background-color: rgb(170, 170, 170); border: 1.5px solid; border-radius: 18px; line-height: 0; padding: 8px 0px 6px; }
.MathJax_MenuClose:hover { color: white !important; border: 2px solid rgb(204, 204, 204) !important; }
.MathJax_MenuClose:hover span { background-color: rgb(204, 204, 204) !important; }
.MathJax_MenuClose:hover:focus { outline: none; }
.MathJax_Preview .MJXf-math { color: inherit !important; }
.MJX_Assistive_MathML { top: 0px; left: 0px; clip: rect(1px 1px 1px 1px); user-select: none; position: absolute !important; padding: 1px 0px 0px !important; border: 0px !important; height: 1px !important; width: 1px !important; overflow: hidden !important; display: block !important; }
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block { width: 100% !important; }
#MathJax_Zoom { position: absolute; background-color: rgb(240, 240, 240); overflow: auto; display: block; z-index: 301; padding: 0.5em; border: 1px solid black; margin: 0px; font-weight: normal; font-style: normal; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-sizing: content-box; box-shadow: rgb(170, 170, 170) 5px 5px 15px; }
#MathJax_ZoomOverlay { position: absolute; left: 0px; top: 0px; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0px; padding: 0px; margin: 0px; background-color: white; opacity: 0; }
#MathJax_ZoomFrame { position: relative; display: inline-block; height: 0px; width: 0px; }
#MathJax_ZoomEventTrap { position: absolute; left: 0px; top: 0px; z-index: 302; display: inline-block; border: 0px; padding: 0px; margin: 0px; background-color: white; opacity: 0; }
.MathJax_Preview { color: rgb(136, 136, 136); }
#MathJax_Message { position: fixed; left: 1px; bottom: 2px; background-color: rgb(230, 230, 230); border: 1px solid rgb(149, 149, 149); margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap; }
#MathJax_MSIE_Frame { position: absolute; top: 0px; left: 0px; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px; }
.MathJax_Error { color: rgb(204, 0, 0); font-style: italic; }
.MJXp-script { font-size: 0.8em; }
.MJXp-right { transform-origin: right center 0px; }
.MJXp-bold { font-weight: bold; }
.MJXp-italic { font-style: italic; }
.MJXp-scr { font-family: MathJax_Script, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-frak { font-family: MathJax_Fraktur, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-sf { font-family: MathJax_SansSerif, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-cal { font-family: MathJax_Caligraphic, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-mono { font-family: MathJax_Typewriter, "Times New Roman", Times, STIXGeneral, serif; }
.MJXp-largeop { font-size: 150%; }
.MJXp-largeop.MJXp-int { vertical-align: -0.2em; }
.MJXp-math { display: inline-block; line-height: 1.2; text-indent: 0px; font-family: "Times New Roman", Times, STIXGeneral, serif; white-space: nowrap; border-collapse: collapse; }
.MJXp-display { display: block; text-align: center; margin: 1em 0px; }
.MJXp-math span { display: inline-block; }
.MJXp-box { text-align: center; display: block !important; }
.MJXp-box::after { content: " "; }
.MJXp-rule { margin-top: 0.1em; display: block !important; }
.MJXp-char { display: block !important; }
.MJXp-mo { margin: 0px 0.15em; }
.MJXp-mfrac { margin: 0px 0.125em; vertical-align: 0.25em; }
.MJXp-denom { width: 100%; display: inline-table !important; }
.MJXp-denom > * { display: table-row !important; }
.MJXp-surd { vertical-align: top; }
.MJXp-surd > * { display: block !important; }
.MJXp-script-box > * { height: 50%; display: table !important; }
.MJXp-script-box > * > * { vertical-align: top; display: table-cell !important; }
.MJXp-script-box > :last-child > * { vertical-align: bottom; }
.MJXp-script-box > * > * > * { display: block !important; }
.MJXp-mphantom { visibility: hidden; }
.MJXp-munderover { display: inline-table !important; }
.MJXp-over { text-align: center; display: inline-block !important; }
.MJXp-over > * { display: block !important; }
.MJXp-munderover > * { display: table-row !important; }
.MJXp-mtable { vertical-align: 0.25em; margin: 0px 0.125em; }
.MJXp-mtable > * { vertical-align: middle; display: inline-table !important; }
.MJXp-mtr { display: table-row !important; }
.MJXp-mtd { text-align: center; padding: 0.5em 0px 0px 0.5em; display: table-cell !important; }
.MJXp-mtr > .MJXp-mtd:first-child { padding-left: 0px; }
.MJXp-mtr:first-child > .MJXp-mtd { padding-top: 0px; }
.MJXp-mlabeledtr { display: table-row !important; }
.MJXp-mlabeledtr > .MJXp-mtd:first-child { padding-left: 0px; }
.MJXp-mlabeledtr:first-child > .MJXp-mtd { padding-top: 0px; }
.MJXp-merror { background-color: rgb(255, 255, 136); color: rgb(204, 0, 0); border: 1px solid rgb(204, 0, 0); padding: 1px 3px; font-style: normal; font-size: 90%; }
.MJXp-scale0 { transform: scaleX(0); }
.MJXp-scale1 { transform: scaleX(0.1); }
.MJXp-scale2 { transform: scaleX(0.2); }
.MJXp-scale3 { transform: scaleX(0.3); }
.MJXp-scale4 { transform: scaleX(0.4); }
.MJXp-scale5 { transform: scaleX(0.5); }
.MJXp-scale6 { transform: scaleX(0.6); }
.MJXp-scale7 { transform: scaleX(0.7); }
.MJXp-scale8 { transform: scaleX(0.8); }
.MJXp-scale9 { transform: scaleX(0.9); }
.MathJax_PHTML .noError { font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid; }

    </style>

    <script type="text/javascript">
var toc = [];

var setVisible = function(node, visible) {
    var cl = 'hide-none';
    if (visible) {
        node.classList.remove(cl);
    } else {
        node.classList.add(cl);
    }
};

var isVisible = function(node) {
    var cl = 'hide-none';
    return !node.classList.contains(cl);
};

var setPostContentExpanded = function(node, expanded) {
    var cl = 'col-expand';
    if (expanded) {
        node.classList.add(cl);
    } else {
        node.classList.remove(cl);
    }
};

var setOutlinePanelVisible = function(visible) {
    var outlinePanel = document.getElementById('outline-panel');
    var postContent = document.getElementById('post-content');

    setVisible(outlinePanel, visible);
    setPostContentExpanded(postContent, !visible);
};

var isOutlinePanelVisible = function() {
    var outlinePanel = document.getElementById('outline-panel');
    return isVisible(outlinePanel);
};

window.addEventListener('load', function() {
    var outlinePanel = document.getElementById('outline-panel');
    outlinePanel.style.display = 'initial';

    var floatingContainer = document.getElementById('container-floating');
    floatingContainer.style.display = 'initial';

    var outlineContent = document.getElementById('outline-content');
    var postContent = document.getElementById('post-content');

    // Escape @text to Html.
    var escapeHtml = function(text) {
        var map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };

        return text.replace(/[&<>"']/g, function(m) { return map[m]; });
    }

    // Fetch the outline.
    var headers = postContent.querySelectorAll("h1, h2, h3, h4, h5, h6");
    toc = [];
    for (var i = 0; i < headers.length; ++i) {
        var header = headers[i];

        toc.push({
            level: parseInt(header.tagName.substr(1)),
            anchor: header.id,
            title: escapeHtml(header.textContent)
        });
    }

    if (toc.length == 0) {
        setOutlinePanelVisible(false);
        setVisible(floatingContainer, false);
        return;
    }

    var baseLevel = baseLevelOfToc(toc);
    var tocTree = tocToTree(toPerfectToc(toc, baseLevel), baseLevel);

    outlineContent.innerHTML = tocTree;
    setOutlinePanelVisible(true);
    setVisible(floatingContainer, true);
});

// Return the topest level of @toc, starting from 1.
var baseLevelOfToc = function(p_toc) {
    var level = -1;
    for (i in p_toc) {
        if (level == -1) {
            level = p_toc[i].level;
        } else if (level > p_toc[i].level) {
            level = p_toc[i].level;
        }
    }

    if (level == -1) {
        level = 1;
    }

    return level;
};

// Handle wrong title levels, such as '#' followed by '###'
var toPerfectToc = function(p_toc, p_baseLevel) {
    var i;
    var curLevel = p_baseLevel - 1;
    var perfToc = [];
    for (i in p_toc) {
        var item = p_toc[i];

        // Insert empty header.
        while (item.level > curLevel + 1) {
            curLevel += 1;
            var tmp = { level: curLevel,
                        anchor: '',
                        title: '[EMPTY]'
                      };
            perfToc.push(tmp);
        }

        perfToc.push(item);
        curLevel = item.level;
    }

    return perfToc;
};

var itemToHtml = function(item) {
    return '<a href="#' + item.anchor + '" data="' + item.anchor + '">' + item.title + '</a>';
};

// Turn a perfect toc to a tree using <ul>
var tocToTree = function(p_toc, p_baseLevel) {
    var i;
    var front = '<li>';
    var ending = ['</li>'];
    var curLevel = p_baseLevel;
    for (i in p_toc) {
        var item = p_toc[i];
        if (item.level == curLevel) {
            front += '</li>';
            front += '<li>';
            front += itemToHtml(item);
        } else if (item.level > curLevel) {
            // assert(item.level - curLevel == 1)
            front += '<ul>';
            ending.push('</ul>');
            front += '<li>';
            front += itemToHtml(item);
            ending.push('</li>');
            curLevel = item.level;
        } else {
            while (item.level < curLevel) {
                var ele = ending.pop();
                front += ele;
                if (ele == '</ul>') {
                    curLevel--;
                }
            }
            front += '</li>';
            front += '<li>';
            front += itemToHtml(item);
        }
    }
    while (ending.length > 0) {
        front += ending.pop();
    }
    front = front.replace("<li></li>", "");
    front = '<ul>' + front + '</ul>';
    return front;
};

var toggleMore = function() {
    if (toc.length == 0) {
        return;
    }

    var p = document.getElementById('floating-more');
    if (isOutlinePanelVisible()) {
        p.textContent = '<';
        setOutlinePanelVisible(false);
    } else {
        p.textContent = '>';
        setOutlinePanelVisible(true);
    }
};

window.addEventListener('scroll', function() {
    if (toc.length == 0 || !isOutlinePanelVisible()) {
        return;
    }

    var postContent = document.getElementById('post-content');
    var scrollTop = document.documentElement.scrollTop
                    || document.body.scrollTop
                    || window.pageYOffset;
    var eles = postContent.querySelectorAll("h1, h2, h3, h4, h5, h6");

    if (eles.length == 0) {
        return;
    }

    var idx = -1;
    var biaScrollTop = scrollTop + 50;
    for (var i = 0; i < eles.length; ++i) {
        if (biaScrollTop >= eles[i].offsetTop) {
            idx = i;
        } else {
            break;
        }
    }

    var header = '';
    if (idx != -1) {
        header = eles[idx].id;
    }

    highlightItemOnlyInOutline(header);
});

var highlightItemOnlyInOutline = function(id) {
    var cl = 'outline-bold';
    var outlineContent = document.getElementById('outline-content');
    var eles = outlineContent.querySelectorAll("a");
    var target = null;
    for (var i = 0; i < eles.length; ++i) {
        var ele = eles[i];
        if (ele.getAttribute('data') == id) {
            target = ele;
            ele.classList.add(cl);
        } else {
            ele.classList.remove(cl);
        }
    }

    // TODO: scroll target into view within the outline panel scroll area.
};

</script>


<!-- HEAD_PLACE_HOLDER -->
</head>
<body>
<div class="container-fluid">
<div class="row flex-xl-nowrap">
    <div id="outline-panel" style="display:none;" class="d-none d-md-block d-xl-block col-md-3 col-xl-2 bd-toc">
        <div id="outline-content" class="section-nav"></div>
    </div>
    <div id="post-content" class="col-12 col-md-9 col-xl-10 py-md-3 pl-md-5 bd-content">
    <h1 id="toc_0">09.AI狀態模式 State<a class="vnote-anchor" href="#toc_0" data-anchor-icon="#"></a></h1>
<h2 id="toc_1">講解<a class="vnote-anchor" href="#toc_1" data-anchor-icon="#"></a></h2>
<ul>
<li>基本上跟第一章狀態模式差不多</li>
<li>AI狀態模式統稱狀態機</li>
</ul>
<h2 id="toc_2">書中案例<a class="vnote-anchor" href="#toc_2" data-anchor-icon="#"></a></h2>
<ul>
<li>書中案例來看，是將橋接模式應用在AI狀態機</li>
<li>在書中AI 涉及到 "閒置"、"追擊"、"攻擊"</li>
</ul>
<h2 id="toc_3">UML<a class="vnote-anchor" href="#toc_3" data-anchor-icon="#"></a></h2>
<div class="plantuml-diagram"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="444px" preserveAspectRatio="none" style="width:1477px;height:444px;" version="1.1" viewBox="0 0 1477 444" width="1477.5px" zoomAndPan="magnify" class="view-svg"><defs><filter height="300%" id="flw2ywweuspdj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--MD5=[b13601c1bed2f0d7114098b43cab99b9]
cluster 狀態機--><rect fill="#FFFFFF" filter="url(#flw2ywweuspdj)" height="153" style="stroke: #000000; stroke-width: 2.25;" width="802.5" x="659.25" y="274.5"></rect><path d="M741.75,276 L741.75,293.9106 L726.75,308.9106 L659.25,308.9106 " fill="none" style="stroke: #000000; stroke-width: 2.25;"></path><text fill="#000000" font-family="sans-serif" font-size="21" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.5" x="663.75" y="301.2964">狀態機</text><!--MD5=[400b77aa2c4174734089f0609e4fa836]
class AttackAIState--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="AttackAIState" style="stroke: #A80036; stroke-width: 2.25;" width="153" x="1284.75" y="331.5"></rect><ellipse cx="1307.25" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M1313.4375,361.4297 Q1312.8984,362.3672 1311.6328,363.3281 Q1309.5234,364.8516 1305.4219,364.8516 Q1302.1406,364.8516 1299.9375,362.6484 Q1297.3828,360.0938 1297.3828,355.3125 Q1297.3828,350.9063 1299.9141,348.2109 Q1302.2344,345.7734 1305.5625,345.7734 Q1308.375,345.7734 1309.8516,346.2188 Q1311.3281,346.6641 1311.3281,346.6641 Q1311.3281,346.6641 1311.3281,345.8203 L1312.8516,345.6797 L1313.0859,351.7734 L1311.0938,351.9609 Q1309.875,346.5703 1305.7734,346.5703 Q1305.7734,346.5703 1304.8828,346.9922 Q1303.5234,347.5078 1302.75,348.3281 Q1300.6875,350.6484 1300.6641,355.3594 Q1300.6406,359.5313 1302.9375,361.875 Q1304.8828,363.8672 1306.125,363.8672 Q1309.1719,363.8672 1312.4531,360.0234 L1313.4375,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="105" x="1328.25" y="364.3638">AttackAIState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="1286.25" x2="1436.25" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="1286.25" x2="1436.25" y1="391.5" y2="391.5"></line><!--MD5=[e797be002bc574fa6f298c7f332d9c02]
class ChaseAIState--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="ChaseAIState" style="stroke: #A80036; stroke-width: 2.25;" width="160.5" x="1071" y="331.5"></rect><ellipse cx="1093.5" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M1099.6875,361.4297 Q1099.1484,362.3672 1097.8828,363.3281 Q1095.7734,364.8516 1091.6719,364.8516 Q1088.3906,364.8516 1086.1875,362.6484 Q1083.6328,360.0938 1083.6328,355.3125 Q1083.6328,350.9063 1086.1641,348.2109 Q1088.4844,345.7734 1091.8125,345.7734 Q1094.625,345.7734 1096.1016,346.2188 Q1097.5781,346.6641 1097.5781,346.6641 Q1097.5781,346.6641 1097.5781,345.8203 L1099.1016,345.6797 L1099.3359,351.7734 L1097.3438,351.9609 Q1096.125,346.5703 1092.0234,346.5703 Q1092.0234,346.5703 1091.1328,346.9922 Q1089.7734,347.5078 1089,348.3281 Q1086.9375,350.6484 1086.9141,355.3594 Q1086.8906,359.5313 1089.1875,361.875 Q1091.1328,363.8672 1092.375,363.8672 Q1095.4219,363.8672 1098.7031,360.0234 L1099.6875,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="112.5" x="1114.5" y="364.3638">ChaseAIState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="1072.5" x2="1230" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="1072.5" x2="1230" y1="391.5" y2="391.5"></line><!--MD5=[b467fda9b6da8d7461117e238ab2d0c4]
class IdleAIState--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="IdleAIState" style="stroke: #A80036; stroke-width: 2.25;" width="135" x="882.75" y="331.5"></rect><ellipse cx="905.25" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M911.4375,361.4297 Q910.8984,362.3672 909.6328,363.3281 Q907.5234,364.8516 903.4219,364.8516 Q900.1406,364.8516 897.9375,362.6484 Q895.3828,360.0938 895.3828,355.3125 Q895.3828,350.9063 897.9141,348.2109 Q900.2344,345.7734 903.5625,345.7734 Q906.375,345.7734 907.8516,346.2188 Q909.3281,346.6641 909.3281,346.6641 Q909.3281,346.6641 909.3281,345.8203 L910.8516,345.6797 L911.0859,351.7734 L909.0938,351.9609 Q907.875,346.5703 903.7734,346.5703 Q903.7734,346.5703 902.8828,346.9922 Q901.5234,347.5078 900.75,348.3281 Q898.6875,350.6484 898.6641,355.3594 Q898.6406,359.5313 900.9375,361.875 Q902.8828,363.8672 904.125,363.8672 Q907.1719,363.8672 910.4531,360.0234 L911.4375,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="87" x="926.25" y="364.3638">IdleAIState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="884.25" x2="1016.25" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="884.25" x2="1016.25" y1="391.5" y2="391.5"></line><!--MD5=[23f8e199bdc31e0d6ba3cce9596b6479]
class MoveAIState--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="MoveAIState" style="stroke: #A80036; stroke-width: 2.25;" width="147" x="683.25" y="331.5"></rect><ellipse cx="705.75" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M711.9375,361.4297 Q711.3984,362.3672 710.1328,363.3281 Q708.0234,364.8516 703.9219,364.8516 Q700.6406,364.8516 698.4375,362.6484 Q695.8828,360.0938 695.8828,355.3125 Q695.8828,350.9063 698.4141,348.2109 Q700.7344,345.7734 704.0625,345.7734 Q706.875,345.7734 708.3516,346.2188 Q709.8281,346.6641 709.8281,346.6641 Q709.8281,346.6641 709.8281,345.8203 L711.3516,345.6797 L711.5859,351.7734 L709.5938,351.9609 Q708.375,346.5703 704.2734,346.5703 Q704.2734,346.5703 703.3828,346.9922 Q702.0234,347.5078 701.25,348.3281 Q699.1875,350.6484 699.1641,355.3594 Q699.1406,359.5313 701.4375,361.875 Q703.3828,363.8672 704.625,363.8672 Q707.6719,363.8672 710.9531,360.0234 L711.9375,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="99" x="726.75" y="364.3638">MoveAIState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="684.75" x2="828.75" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="684.75" x2="828.75" y1="391.5" y2="391.5"></line><!--MD5=[a1908832394178c0f507a77908d0ff4a]
class ICharacter--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="95.5012" id="ICharacter" style="stroke: #A80036; stroke-width: 2.25;" width="135" x="159.75" y="145.5"></rect><ellipse cx="182.25" cy="169.5" fill="#A9DCDF" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M191.6016,176.6484 L184.2188,176.6484 L184.2188,176.1563 Q185.1797,176.0859 185.5781,175.9453 Q186.2109,175.6641 186.2109,174.8906 Q186.2109,174.2813 185.7656,173.1094 L184.875,170.6484 L179.4141,170.6484 L178.1719,173.8125 Q177.9609,174.3047 177.9609,174.8906 Q177.9609,175.6875 178.5703,175.9453 Q178.8281,176.0859 179.6016,176.1563 L179.6016,176.6484 L173.5547,176.6484 L173.5547,176.1563 Q173.8828,176.0859 174.1875,176.0156 Q174.4922,175.9453 174.7734,175.5938 Q175.4766,174.7031 176.5781,171.6563 L181.6172,157.9922 L183.2109,157.9922 L189.1172,173.6953 Q189.6563,175.1953 190.3125,175.7344 Q190.6875,176.0156 191.6016,176.1563 L191.6016,176.6484 Z M184.5469,169.7109 L181.875,161.8594 L179.625,169.7109 L184.5469,169.7109 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="203.25" y="178.3638">ICharacter</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="161.25" x2="293.25" y1="193.5" y2="193.5"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="66" x="168.75" y="219.3757">角色數值</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="161.25" x2="293.25" y1="229.0012" y2="229.0012"></line><!--MD5=[82251a853253b7e188650373a1faaf87]
class ICharacterAI--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="95.5012" id="ICharacterAI" style="stroke: #A80036; stroke-width: 2.25;" width="153" x="492.75" y="145.5"></rect><ellipse cx="515.25" cy="169.5" fill="#A9DCDF" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M524.6016,176.6484 L517.2188,176.6484 L517.2188,176.1563 Q518.1797,176.0859 518.5781,175.9453 Q519.2109,175.6641 519.2109,174.8906 Q519.2109,174.2813 518.7656,173.1094 L517.875,170.6484 L512.4141,170.6484 L511.1719,173.8125 Q510.9609,174.3047 510.9609,174.8906 Q510.9609,175.6875 511.5703,175.9453 Q511.8281,176.0859 512.6016,176.1563 L512.6016,176.6484 L506.5547,176.6484 L506.5547,176.1563 Q506.8828,176.0859 507.1875,176.0156 Q507.4922,175.9453 507.7734,175.5938 Q508.4766,174.7031 509.5781,171.6563 L514.6172,157.9922 L516.2109,157.9922 L522.1172,173.6953 Q522.6563,175.1953 523.3125,175.7344 Q523.6875,176.0156 524.6016,176.1563 L524.6016,176.6484 Z M517.5469,169.7109 L514.875,161.8594 L512.625,169.7109 L517.5469,169.7109 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="536.25" y="178.3638">ICharacterAI</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="494.25" x2="644.25" y1="193.5" y2="193.5"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="114" x="501.75" y="219.3757">AI狀態機控制器</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="494.25" x2="644.25" y1="229.0012" y2="229.0012"></line><!--MD5=[e468a11b19b3327b72bd72a8c8119165]
class IAIState--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="95.5012" id="IAIState" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="794.25" y="145.5"></rect><ellipse cx="819.45" cy="169.5" fill="#A9DCDF" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M828.8016,176.6484 L821.4187,176.6484 L821.4187,176.1563 Q822.3797,176.0859 822.7781,175.9453 Q823.4109,175.6641 823.4109,174.8906 Q823.4109,174.2813 822.9656,173.1094 L822.075,170.6484 L816.6141,170.6484 L815.3719,173.8125 Q815.1609,174.3047 815.1609,174.8906 Q815.1609,175.6875 815.7703,175.9453 Q816.0281,176.0859 816.8016,176.1563 L816.8016,176.6484 L810.7547,176.6484 L810.7547,176.1563 Q811.0828,176.0859 811.3875,176.0156 Q811.6922,175.9453 811.9734,175.5938 Q812.6766,174.7031 813.7781,171.6563 L818.8172,157.9922 L820.4109,157.9922 L826.3172,173.6953 Q826.8562,175.1953 827.5125,175.7344 Q827.8875,176.0156 828.8016,176.1563 L828.8016,176.6484 Z M821.7469,169.7109 L819.075,161.8594 L816.825,169.7109 L821.7469,169.7109 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="841.05" y="178.3638">IAIState</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="795.75" x2="912.75" y1="193.5" y2="193.5"></line><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacingAndGlyphs" textLength="102" x="803.25" y="219.3757">AI的State父類</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="795.75" x2="912.75" y1="229.0012" y2="229.0012"></line><path d="M627.75,12 L627.75,54.7742 L795.75,54.7742 L795.75,27 L780.75,12 L627.75,12 " fill="#FBFB77" filter="url(#flw2ywweuspdj)" style="stroke: #A80036; stroke-width: 1.5;"></path><path d="M780.75,12 L780.75,27 L795.75,27 L780.75,12 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.5;"></path><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="136.5" x="636.75" y="42.9895">這邊是橋接模式</text><!--MD5=[6c9afd200c147b205c0a7326c0169cfa]
class IEnemy--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="IEnemy" style="stroke: #A80036; stroke-width: 2.25;" width="109.5" x="9" y="331.5"></rect><ellipse cx="31.5" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M37.6875,361.4297 Q37.1484,362.3672 35.8828,363.3281 Q33.7734,364.8516 29.6719,364.8516 Q26.3906,364.8516 24.1875,362.6484 Q21.6328,360.0938 21.6328,355.3125 Q21.6328,350.9063 24.1641,348.2109 Q26.4844,345.7734 29.8125,345.7734 Q32.625,345.7734 34.1016,346.2188 Q35.5781,346.6641 35.5781,346.6641 Q35.5781,346.6641 35.5781,345.8203 L37.1016,345.6797 L37.3359,351.7734 L35.3438,351.9609 Q34.125,346.5703 30.0234,346.5703 Q30.0234,346.5703 29.1328,346.9922 Q27.7734,347.5078 27,348.3281 Q24.9375,350.6484 24.9141,355.3594 Q24.8906,359.5313 27.1875,361.875 Q29.1328,363.8672 30.375,363.8672 Q33.4219,363.8672 36.7031,360.0234 L37.6875,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="52.5" y="364.3638">IEnemy</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="10.5" x2="117" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="10.5" x2="117" y1="391.5" y2="391.5"></line><!--MD5=[32ae9a990512fd79ac437b89e0cdcf39]
class ISoldier--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="ISoldier" style="stroke: #A80036; stroke-width: 2.25;" width="111" x="171.75" y="331.5"></rect><ellipse cx="194.25" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M200.4375,361.4297 Q199.8984,362.3672 198.6328,363.3281 Q196.5234,364.8516 192.4219,364.8516 Q189.1406,364.8516 186.9375,362.6484 Q184.3828,360.0938 184.3828,355.3125 Q184.3828,350.9063 186.9141,348.2109 Q189.2344,345.7734 192.5625,345.7734 Q195.375,345.7734 196.8516,346.2188 Q198.3281,346.6641 198.3281,346.6641 Q198.3281,346.6641 198.3281,345.8203 L199.8516,345.6797 L200.0859,351.7734 L198.0938,351.9609 Q196.875,346.5703 192.7734,346.5703 Q192.7734,346.5703 191.8828,346.9922 Q190.5234,347.5078 189.75,348.3281 Q187.6875,350.6484 187.6641,355.3594 Q187.6406,359.5313 189.9375,361.875 Q191.8828,363.8672 193.125,363.8672 Q196.1719,363.8672 199.4531,360.0234 L200.4375,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="63" x="215.25" y="364.3638">ISoldier</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="173.25" x2="281.25" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="173.25" x2="281.25" y1="391.5" y2="391.5"></line><!--MD5=[173ea61e9ae27c47866b6cb9f5d0ad02]
class SoldierAI--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="SoldierAI" style="stroke: #A80036; stroke-width: 2.25;" width="121.5" x="508.5" y="331.5"></rect><ellipse cx="531" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M537.1875,361.4297 Q536.6484,362.3672 535.3828,363.3281 Q533.2734,364.8516 529.1719,364.8516 Q525.8906,364.8516 523.6875,362.6484 Q521.1328,360.0938 521.1328,355.3125 Q521.1328,350.9063 523.6641,348.2109 Q525.9844,345.7734 529.3125,345.7734 Q532.125,345.7734 533.6016,346.2188 Q535.0781,346.6641 535.0781,346.6641 Q535.0781,346.6641 535.0781,345.8203 L536.6016,345.6797 L536.8359,351.7734 L534.8438,351.9609 Q533.625,346.5703 529.5234,346.5703 Q529.5234,346.5703 528.6328,346.9922 Q527.2734,347.5078 526.5,348.3281 Q524.4375,350.6484 524.4141,355.3594 Q524.3906,359.5313 526.6875,361.875 Q528.6328,363.8672 529.875,363.8672 Q532.9219,363.8672 536.2031,360.0234 L537.1875,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="73.5" x="552" y="364.3638">SoldierAI</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="510" x2="628.5" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="510" x2="628.5" y1="391.5" y2="391.5"></line><!--MD5=[381c2ca960471440e576478cdcaea944]
class EnemyAI--><rect fill="#FEFECE" filter="url(#flw2ywweuspdj)" height="72" id="EnemyAI" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="335.25" y="331.5"></rect><ellipse cx="357.75" cy="355.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke: #A80036; stroke-width: 1.5;"></ellipse><path d="M363.9375,361.4297 Q363.3984,362.3672 362.1328,363.3281 Q360.0234,364.8516 355.9219,364.8516 Q352.6406,364.8516 350.4375,362.6484 Q347.8828,360.0938 347.8828,355.3125 Q347.8828,350.9063 350.4141,348.2109 Q352.7344,345.7734 356.0625,345.7734 Q358.875,345.7734 360.3516,346.2188 Q361.8281,346.6641 361.8281,346.6641 Q361.8281,346.6641 361.8281,345.8203 L363.3516,345.6797 L363.5859,351.7734 L361.5938,351.9609 Q360.375,346.5703 356.2734,346.5703 Q356.2734,346.5703 355.3828,346.9922 Q354.0234,347.5078 353.25,348.3281 Q351.1875,350.6484 351.1641,355.3594 Q351.1406,359.5313 353.4375,361.875 Q355.3828,363.8672 356.625,363.8672 Q359.6719,363.8672 362.9531,360.0234 L363.9375,361.4297 Z "></path><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="72" x="378.75" y="364.3638">EnemyAI</text><line style="stroke: #A80036; stroke-width: 2.25;" x1="336.75" x2="453.75" y1="379.5" y2="379.5"></line><line style="stroke: #A80036; stroke-width: 2.25;" x1="336.75" x2="453.75" y1="391.5" y2="391.5"></line><path d="M849,26.25 L849,41.25 L880.5,41.25 L880.5,41.25 L865.5,26.25 L849,26.25 " fill="#FBFB77" filter="url(#flw2ywweuspdj)" style="stroke: #A80036; stroke-width: 1.5;"></path><path d="M865.5,26.25 L865.5,41.25 L880.5,41.25 L865.5,26.25 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.5;"></path><!--MD5=[861c6db1b7bd8347a474e216550b54c6]
link N2 to ICharacterAI--><path d="M693.12,55.743 C672.6,78.315 638.9235,115.359 611.8605,145.1295 " fill="none" id="N2-ICharacterAI" style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;"></path><!--MD5=[75b09e8517b51faae805871c39f7a570]
link N2 to IAIState--><path d="M730.38,55.743 C750.9,78.315 784.5765,115.359 811.6395,145.1295 " fill="none" id="N2-IAIState" style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;"></path><!--MD5=[82f5edbb55fd784eea6bdbccc1650440]
reverse link ICharacter to IEnemy--><path d="M145.3952,261.843 C145.1795,262.062 144.9644,262.281 144.75,262.5 C123.8445,283.8645 103.1241,310.4652 87.8736,331.3496 " fill="none" id="ICharacter<-IEnemy" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="137.7507,254.616,166.8345,241.794,152.0942,269.9535,137.7507,254.616" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[292f6744eb05886de80ed43ed5f8c1be]
reverse link ICharacter to ISoldier--><path d="M227.25,272.022 C227.25,292.743 227.25,314.1365 227.25,331.2669 " fill="none" id="ICharacter<-ISoldier" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="216.75,271.7265,227.25,241.7265,237.75,271.7265,216.75,271.7265" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[e79646f356c0a19c42b11c62183deac6]
reverse link ICharacter to ICharacterAI--><path d="M314.9895,193.5 C374.0685,193.5 433.146,193.5 492.225,193.5 " fill="none" id="ICharacter<-ICharacterAI" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#A80036" points="295.383,193.5,304.383,199.5,313.383,193.5,304.383,187.5,295.383,193.5" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[12bf9ed89761b74ce6268814a502357a]
reverse link ICharacterAI to SoldierAI--><path d="M569.25,272.022 C569.25,292.743 569.25,314.1365 569.25,331.2669 " fill="none" id="ICharacterAI<-SoldierAI" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="558.75,271.7265,569.25,241.7265,579.75,271.7265,558.75,271.7265" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[6a336a7daf9048b1d4c849921269301f]
reverse link ICharacterAI to EnemyAI--><path d="M482.937,261.8415 C482.7075,262.0605 482.478,262.281 482.25,262.5 C460.0845,283.8135 437.823,310.4166 421.3665,331.314 " fill="none" id="ICharacterAI<-EnemyAI" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="476.232,253.755,505.6695,241.77,490.131,269.4975,476.232,253.755" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[096baf47fe4a3b80287feb09c77653e9]
reverse link ICharacterAI to IAIState--><path d="M665.724,193.5 C708.5055,193.5 751.2885,193.5 794.0715,193.5 " fill="none" id="ICharacterAI<-IAIState" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="#FFFFFF" points="646.0665,193.5,655.0665,199.5,664.0665,193.5,655.0665,187.5,646.0665,193.5" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[72def165e95bb6116262e8ecd9937397]
reverse link IAIState to AttackAIState--><path d="M944.937,194.5995 C1030.1265,197.712 1158.927,211.6065 1257.75,262.5 C1289.1525,278.673 1316.967,307.7958 1335.8325,331.0386 " fill="none" id="IAIState<-AttackAIState" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="944.319,205.0875,914.577,193.8795,944.817,184.0935,944.319,205.0875" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[f5380f979822eef99578bd38325c1f60]
reverse link IAIState to ChaseAIState--><path d="M943.4385,217.8465 C976.6845,228.5685 1013.829,243.294 1044.75,262.5 C1074.5355,281.001 1102.731,309.0555 1122.6195,331.2909 " fill="none" id="IAIState<-ChaseAIState" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="940.017,227.7825,914.2935,209.1135,946.0455,207.6675,940.017,227.7825" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[02e6c55609743fbc43a37595764fee51]
reverse link IAIState to IdleAIState--><path d="M895.4415,268.3725 C907.7025,290.2125 920.568,313.1287 930.75,331.2669 " fill="none" id="IAIState<-IdleAIState" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="886.0125,273.0255,880.482,241.7265,904.3245,262.746,886.0125,273.0255" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[a30e041f99e0bd99a099b4d7431adf21]
reverse link IAIState to MoveAIState--><path d="M812.415,268.3725 C799.962,290.2125 786.8955,313.1287 776.5545,331.2669 " fill="none" id="IAIState<-MoveAIState" style="stroke: #A80036; stroke-width: 1.5;"></path><polygon fill="none" points="803.6265,262.587,827.607,241.7265,821.8695,272.988,803.6265,262.587" style="stroke: #A80036; stroke-width: 1.5;"></polygon><!--MD5=[ecf5193f504735306e63123c5bb8ec51]
@startuml
skinparam classAttributeIconSize 0
scale 1.5

package 狀態機 <<Frame>> {
class AttackAIState
class ChaseAIState
class IdleAIState
class MoveAIState
}


abstract class ICharacter{
角色數值
}


abstract class ICharacterAI{
AI狀態機控制器
}

abstract class IAIState{
AI的State父類
}

note "這邊是橋接模式" as N2
ICharacterAI .up. N2
N2 .. IAIState




ICharacter <|- - IEnemy
ICharacter <|- - ISoldier

ICharacter *-right- ICharacterAI

ICharacterAI <|- - SoldierAI
ICharacterAI <|- - EnemyAI

ICharacterAI o-right- IAIState

IAIState <|- - AttackAIState
IAIState <|- - ChaseAIState
IAIState <|- - IdleAIState
IAIState <|- - MoveAIState



note as N1

end note

@enduml

PlantUML version 1.2020.00(Sat Jan 11 20:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_231-b11
Operating System: Windows 10
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg></div>
<h2 id="toc_4">時序圖<a class="vnote-anchor" href="#toc_4" data-anchor-icon="#"></a></h2>
<div class="plantuml-diagram"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="750px" preserveAspectRatio="none" style="width:826px;height:750px;" version="1.1" viewBox="0 0 826 750" width="826.5px" zoomAndPan="magnify" class="view-svg"><defs><filter height="300%" id="faffs9ms4mlt1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="75" x2="75" y1="62.9106" y2="684.9749"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="225" x2="225" y1="62.9106" y2="684.9749"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="413.25" x2="413.25" y1="62.9106" y2="684.9749"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="570.75" x2="570.75" y1="62.9106" y2="684.9749"></line><line style="stroke: #A80036; stroke-width: 1.5; stroke-dasharray: 5.0,5.0;" x1="740.25" x2="740.25" y1="62.9106" y2="684.9749"></line><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="12" y="4.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="99" x="22.5" y="40.2964">ICharacter</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="120" x="12" y="683.4749"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="99" x="22.5" y="719.2712">ICharacter</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="138" x="153" y="4.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="117" x="163.5" y="40.2964">ICharacterAI</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="138" x="153" y="683.4749"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="117" x="163.5" y="719.2712">ICharacterAI</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="121.5" x="350.25" y="4.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="100.5" x="360.75" y="40.2964">IdleAIState</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="121.5" x="350.25" y="683.4749"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="100.5" x="360.75" y="719.2712">IdleAIState</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="150" x="492.75" y="4.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="129" x="503.25" y="40.2964">ChaseAIState</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="150" x="492.75" y="683.4749"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="129" x="503.25" y="719.2712">ChaseAIState</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="147" x="663.75" y="4.5"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="126" x="674.25" y="40.2964">AttackAIState</text><rect fill="#FEFECE" filter="url(#faffs9ms4mlt1)" height="50.9106" style="stroke: #A80036; stroke-width: 2.25;" width="147" x="663.75" y="683.4749"></rect><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacingAndGlyphs" textLength="126" x="674.25" y="719.2712">AttackAIState</text><polygon fill="#A80036" points="207,108.6848,222,114.6848,207,120.6848,213,114.6848" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="75" x2="216" y1="114.6848" y2="114.6848"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="85.5" y="107.4001">1</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="102" y="107.4001">Update</text><polygon fill="#A80036" points="396,157.459,411,163.459,396,169.459,402,163.459" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="405" y1="163.459" y2="163.459"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="235.5" y="156.1743">2</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="252" y="156.1743">Update</text><polygon fill="#A80036" points="241.5,234.0073,226.5,240.0073,241.5,246.0073,235.5,240.0073" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="412.5" y1="240.0073" y2="240.0073"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="250.5" y="218.8356">3</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="130.5" x="267" y="204.9485">ChangeAIState</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="85.5" x="273" y="232.7227">切換State</text><polygon fill="#A80036" points="207,282.7815,222,288.7815,207,294.7815,213,288.7815" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="75" x2="216" y1="288.7815" y2="288.7815"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="85.5" y="281.4968">4</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="102" y="281.4968">Update</text><polygon fill="#A80036" points="552.75,331.5557,567.75,337.5557,552.75,343.5557,558.75,337.5557" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="561.75" y1="337.5557" y2="337.5557"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="235.5" y="330.271">5</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="252" y="330.271">Update</text><polygon fill="#A80036" points="241.5,380.3298,226.5,386.3298,241.5,392.3298,235.5,386.3298" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="569.25" y1="386.3298" y2="386.3298"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="250.5" y="379.0452">6</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="45" x="267" y="379.0452">Move</text><polygon fill="#A80036" points="552.75,429.104,567.75,435.104,552.75,441.104,558.75,435.104" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="561.75" y1="435.104" y2="435.104"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="235.5" y="427.8193">7</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="175.5" x="252" y="427.8193">TargeInAttackRange</text><polygon fill="#A80036" points="552.75,477.8782,567.75,483.8782,552.75,489.8782,558.75,483.8782" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="561.75" y1="483.8782" y2="483.8782"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="235.5" y="476.5935">8</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="70.5" x="252" y="476.5935">InRange</text><polygon fill="#A80036" points="241.5,554.4265,226.5,560.4265,241.5,566.4265,235.5,560.4265" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="569.25" y1="560.4265" y2="560.4265"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.5" x="250.5" y="539.2548">9</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="130.5" x="267" y="525.3677">ChangeAIState</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="85.5" x="273" y="553.1418">切換State</text><polygon fill="#A80036" points="722.25,603.2007,737.25,609.2007,722.25,615.2007,728.25,609.2007" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="75" x2="731.25" y1="609.2007" y2="609.2007"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="85.5" y="601.916">10</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="61.5" x="112.5" y="601.916">Update</text><polygon fill="#A80036" points="241.5,651.9749,226.5,657.9749,241.5,663.9749,235.5,657.9749" style="stroke: #A80036; stroke-width: 1.5;"></polygon><line style="stroke: #A80036; stroke-width: 1.5;" x1="232.5" x2="738.75" y1="657.9749" y2="657.9749"></line><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="250.5" y="650.6902">11</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacingAndGlyphs" textLength="57" x="277.5" y="650.6902">Attack</text><!--MD5=[6f64fd60b0f3243b3c962f97fe92e435]
@startuml
autonumber
scale 1.5
participant ICharacter
participant ICharacterAI
participant IdleAIState
participant ChaseAIState
participant AttackAIState


ICharacter -> ICharacterAI : Update
ICharacterAI -> IdleAIState :Update
IdleAIState -> ICharacterAI : ChangeAIState \n 切換State
ICharacter -> ICharacterAI :Update
ICharacterAI -> ChaseAIState:Update
ChaseAIState -> ICharacterAI:Move
ICharacterAI -> ChaseAIState:TargeInAttackRange 
ICharacterAI -> ChaseAIState :InRange
ChaseAIState -> ICharacterAI:ChangeAIState \n 切換State
ICharacter -> AttackAIState:Update
AttackAIState -> ICharacterAI:Attack


@enduml

PlantUML version 1.2020.00(Sat Jan 11 20:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_231-b11
Operating System: Windows 10
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg></div>
<h2 id="toc_5">總結<a class="vnote-anchor" href="#toc_5" data-anchor-icon="#"></a></h2>
<p>實際上就提一下AI狀態機，但將控制器跟狀態分開，用橋接接起來，這部分很不錯<br>
將狀態機跟狀態控制器分開，這樣分開，非常好維護，<br>
即使有新人物，新增控制器，就可以簡單新增<br>
既使企劃又要改，只要新增狀態，並且改一下更換的邏輯，就可以</p>
<p>PS:<br>
這邊要注意，狀態機的切換規則要放在哪裡，</p>
<ol>
<li>放在 State 裡面的話，如果後期有不同規則，就必須修改到State</li>
<li>放在控制器裡面，修改是比較方便，但控制器會一直修正</li>
</ol>

    </div>
</div>
</div>

<div id="container-floating" style="display:none;" class="d-none d-md-block d-xl-block">
    <div id="floating-button" onclick="toggleMore()">
        <p id="floating-more" class="more">&gt;</p>
    </div>
</div>

<!--
<div class="footer" id="vnote-footer">
    <p>Generated by <em><a href="https://tamlok.github.io/vnote/">VNote</a></em>.</p>
</div>
-->
</body>
</html>
